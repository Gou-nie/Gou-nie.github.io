import{t as Ct}from"./tapeContentArr-TK954Ocu.js";import{_ as At}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as $,o as j,e as _t,a as dt,t as Dt,f as B,F as Et,j as Rt,n as gt,l as Bt,q as Ht,s as Gt}from"./app-qP7LBjAK.js";function st(o,t,n){if(o&&o.length){const[e,s]=t,a=Math.PI/180*n,r=Math.cos(a),i=Math.sin(a);for(const h of o){const[l,c]=h;h[0]=(l-e)*r-(c-s)*i+e,h[1]=(l-e)*i+(c-s)*r+s}}}function qt(o,t){return o[0]===t[0]&&o[1]===t[1]}function Vt(o,t,n,e=1){const s=n,a=Math.max(t,.1),r=o[0]&&o[0][0]&&typeof o[0][0]=="number"?[o]:o,i=[0,0];if(s)for(const l of r)st(l,i,s);const h=function(l,c,d){const p=[];for(const m of l){const v=[...m];qt(v[0],v[v.length-1])||v.push([v[0][0],v[0][1]]),v.length>2&&p.push(v)}const u=[];c=Math.max(c,.1);const f=[];for(const m of p)for(let v=0;v<m.length-1;v++){const w=m[v],x=m[v+1];if(w[1]!==x[1]){const b=Math.min(w[1],x[1]);f.push({ymin:b,ymax:Math.max(w[1],x[1]),x:b===w[1]?w[0]:x[0],islope:(x[0]-w[0])/(x[1]-w[1])})}}if(f.sort((m,v)=>m.ymin<v.ymin?-1:m.ymin>v.ymin?1:m.x<v.x?-1:m.x>v.x?1:m.ymax===v.ymax?0:(m.ymax-v.ymax)/Math.abs(m.ymax-v.ymax)),!f.length)return u;let g=[],M=f[0].ymin,k=0;for(;g.length||f.length;){if(f.length){let m=-1;for(let v=0;v<f.length&&!(f[v].ymin>M);v++)m=v;f.splice(0,m+1).forEach(v=>{g.push({s:M,edge:v})})}if(g=g.filter(m=>!(m.edge.ymax<=M)),g.sort((m,v)=>m.edge.x===v.edge.x?0:(m.edge.x-v.edge.x)/Math.abs(m.edge.x-v.edge.x)),(d!==1||k%c==0)&&g.length>1)for(let m=0;m<g.length;m+=2){const v=m+1;if(v>=g.length)break;const w=g[m].edge,x=g[v].edge;u.push([[Math.round(w.x),M],[Math.round(x.x),M]])}M+=d,g.forEach(m=>{m.edge.x=m.edge.x+d*m.edge.islope}),k++}return u}(r,a,e);if(s){for(const l of r)st(l,i,-s);(function(l,c,d){const p=[];l.forEach(u=>p.push(...u)),st(p,c,d)})(h,i,-s)}return h}function q(o,t){var n;const e=t.hachureAngle+90;let s=t.hachureGap;s<0&&(s=4*t.strokeWidth),s=Math.round(Math.max(s,.1));let a=1;return t.roughness>=1&&(((n=t.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(a=s),Vt(o,s,e,a||1)}class ct{constructor(t){this.helper=t}fillPolygons(t,n){return this._fillPolygons(t,n)}_fillPolygons(t,n){const e=q(t,n);return{type:"fillSketch",ops:this.renderLines(e,n)}}renderLines(t,n){const e=[];for(const s of t)e.push(...this.helper.doubleLineOps(s[0][0],s[0][1],s[1][0],s[1][1],n));return e}}function et(o){const t=o[0],n=o[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}class $t extends ct{fillPolygons(t,n){let e=n.hachureGap;e<0&&(e=4*n.strokeWidth),e=Math.max(e,.1);const s=q(t,Object.assign({},n,{hachureGap:e})),a=Math.PI/180*n.hachureAngle,r=[],i=.5*e*Math.cos(a),h=.5*e*Math.sin(a);for(const[l,c]of s)et([l,c])&&r.push([[l[0]-i,l[1]+h],[...c]],[[l[0]+i,l[1]-h],[...c]]);return{type:"fillSketch",ops:this.renderLines(r,n)}}}class jt extends ct{fillPolygons(t,n){const e=this._fillPolygons(t,n),s=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),a=this._fillPolygons(t,s);return e.ops=e.ops.concat(a.ops),e}}class Ft{constructor(t){this.helper=t}fillPolygons(t,n){const e=q(t,n=Object.assign({},n,{hachureAngle:0}));return this.dotsOnLines(e,n)}dotsOnLines(t,n){const e=[];let s=n.hachureGap;s<0&&(s=4*n.strokeWidth),s=Math.max(s,.1);let a=n.fillWeight;a<0&&(a=n.strokeWidth/2);const r=s/4;for(const i of t){const h=et(i),l=h/s,c=Math.ceil(l)-1,d=h-c*s,p=(i[0][0]+i[1][0])/2-s/4,u=Math.min(i[0][1],i[1][1]);for(let f=0;f<c;f++){const g=u+d+f*s,M=p-r+2*Math.random()*r,k=g-r+2*Math.random()*r,m=this.helper.ellipse(M,k,a,a,n);e.push(...m.ops)}}return{type:"fillSketch",ops:e}}}class Zt{constructor(t){this.helper=t}fillPolygons(t,n){const e=q(t,n);return{type:"fillSketch",ops:this.dashedLine(e,n)}}dashedLine(t,n){const e=n.dashOffset<0?n.hachureGap<0?4*n.strokeWidth:n.hachureGap:n.dashOffset,s=n.dashGap<0?n.hachureGap<0?4*n.strokeWidth:n.hachureGap:n.dashGap,a=[];return t.forEach(r=>{const i=et(r),h=Math.floor(i/(e+s)),l=(i+s-h*(e+s))/2;let c=r[0],d=r[1];c[0]>d[0]&&(c=r[1],d=r[0]);const p=Math.atan((d[1]-c[1])/(d[0]-c[0]));for(let u=0;u<h;u++){const f=u*(e+s),g=f+e,M=[c[0]+f*Math.cos(p)+l*Math.cos(p),c[1]+f*Math.sin(p)+l*Math.sin(p)],k=[c[0]+g*Math.cos(p)+l*Math.cos(p),c[1]+g*Math.sin(p)+l*Math.sin(p)];a.push(...this.helper.doubleLineOps(M[0],M[1],k[0],k[1],n))}}),a}}class Nt{constructor(t){this.helper=t}fillPolygons(t,n){const e=n.hachureGap<0?4*n.strokeWidth:n.hachureGap,s=n.zigzagOffset<0?e:n.zigzagOffset,a=q(t,n=Object.assign({},n,{hachureGap:e+s}));return{type:"fillSketch",ops:this.zigzagLines(a,s,n)}}zigzagLines(t,n,e){const s=[];return t.forEach(a=>{const r=et(a),i=Math.round(r/(2*n));let h=a[0],l=a[1];h[0]>l[0]&&(h=a[1],l=a[0]);const c=Math.atan((l[1]-h[1])/(l[0]-h[0]));for(let d=0;d<i;d++){const p=2*d*n,u=2*(d+1)*n,f=Math.sqrt(2*Math.pow(n,2)),g=[h[0]+p*Math.cos(c),h[1]+p*Math.sin(c)],M=[h[0]+u*Math.cos(c),h[1]+u*Math.sin(c)],k=[g[0]+f*Math.cos(c+Math.PI/4),g[1]+f*Math.sin(c+Math.PI/4)];s.push(...this.helper.doubleLineOps(g[0],g[1],k[0],k[1],e),...this.helper.doubleLineOps(k[0],k[1],M[0],M[1],e))}}),s}}const S={};class Qt{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const Ut=0,nt=1,mt=2,F={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function ot(o,t){return o.type===t}function ut(o){const t=[],n=function(r){const i=new Array;for(;r!=="";)if(r.match(/^([ \t\r\n,]+)/))r=r.substr(RegExp.$1.length);else if(r.match(/^([aAcChHlLmMqQsStTvVzZ])/))i[i.length]={type:Ut,text:RegExp.$1},r=r.substr(RegExp.$1.length);else{if(!r.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];i[i.length]={type:nt,text:`${parseFloat(RegExp.$1)}`},r=r.substr(RegExp.$1.length)}return i[i.length]={type:mt,text:""},i}(o);let e="BOD",s=0,a=n[s];for(;!ot(a,mt);){let r=0;const i=[];if(e==="BOD"){if(a.text!=="M"&&a.text!=="m")return ut("M0,0"+o);s++,r=F[a.text],e=a.text}else ot(a,nt)?r=F[e]:(s++,r=F[a.text],e=a.text);if(!(s+r<n.length))throw new Error("Path data ended short");for(let h=s;h<s+r;h++){const l=n[h];if(!ot(l,nt))throw new Error("Param not a number: "+e+","+l.text);i[i.length]=+l.text}if(typeof F[e]!="number")throw new Error("Bad segment: "+e);{const h={key:e,data:i};t.push(h),s+=r,a=n[s],e==="M"&&(e="L"),e==="m"&&(e="l")}}return t}function Pt(o){let t=0,n=0,e=0,s=0;const a=[];for(const{key:r,data:i}of o)switch(r){case"M":a.push({key:"M",data:[...i]}),[t,n]=i,[e,s]=i;break;case"m":t+=i[0],n+=i[1],a.push({key:"M",data:[t,n]}),e=t,s=n;break;case"L":a.push({key:"L",data:[...i]}),[t,n]=i;break;case"l":t+=i[0],n+=i[1],a.push({key:"L",data:[t,n]});break;case"C":a.push({key:"C",data:[...i]}),t=i[4],n=i[5];break;case"c":{const h=i.map((l,c)=>c%2?l+n:l+t);a.push({key:"C",data:h}),t=h[4],n=h[5];break}case"Q":a.push({key:"Q",data:[...i]}),t=i[2],n=i[3];break;case"q":{const h=i.map((l,c)=>c%2?l+n:l+t);a.push({key:"Q",data:h}),t=h[2],n=h[3];break}case"A":a.push({key:"A",data:[...i]}),t=i[5],n=i[6];break;case"a":t+=i[5],n+=i[6],a.push({key:"A",data:[i[0],i[1],i[2],i[3],i[4],t,n]});break;case"H":a.push({key:"H",data:[...i]}),t=i[0];break;case"h":t+=i[0],a.push({key:"H",data:[t]});break;case"V":a.push({key:"V",data:[...i]}),n=i[0];break;case"v":n+=i[0],a.push({key:"V",data:[n]});break;case"S":a.push({key:"S",data:[...i]}),t=i[2],n=i[3];break;case"s":{const h=i.map((l,c)=>c%2?l+n:l+t);a.push({key:"S",data:h}),t=h[2],n=h[3];break}case"T":a.push({key:"T",data:[...i]}),t=i[0],n=i[1];break;case"t":t+=i[0],n+=i[1],a.push({key:"T",data:[t,n]});break;case"Z":case"z":a.push({key:"Z",data:[]}),t=e,n=s}return a}function St(o){const t=[];let n="",e=0,s=0,a=0,r=0,i=0,h=0;for(const{key:l,data:c}of o){switch(l){case"M":t.push({key:"M",data:[...c]}),[e,s]=c,[a,r]=c;break;case"C":t.push({key:"C",data:[...c]}),e=c[4],s=c[5],i=c[2],h=c[3];break;case"L":t.push({key:"L",data:[...c]}),[e,s]=c;break;case"H":e=c[0],t.push({key:"L",data:[e,s]});break;case"V":s=c[0],t.push({key:"L",data:[e,s]});break;case"S":{let d=0,p=0;n==="C"||n==="S"?(d=e+(e-i),p=s+(s-h)):(d=e,p=s),t.push({key:"C",data:[d,p,...c]}),i=c[0],h=c[1],e=c[2],s=c[3];break}case"T":{const[d,p]=c;let u=0,f=0;n==="Q"||n==="T"?(u=e+(e-i),f=s+(s-h)):(u=e,f=s);const g=e+2*(u-e)/3,M=s+2*(f-s)/3,k=d+2*(u-d)/3,m=p+2*(f-p)/3;t.push({key:"C",data:[g,M,k,m,d,p]}),i=u,h=f,e=d,s=p;break}case"Q":{const[d,p,u,f]=c,g=e+2*(d-e)/3,M=s+2*(p-s)/3,k=u+2*(d-u)/3,m=f+2*(p-f)/3;t.push({key:"C",data:[g,M,k,m,u,f]}),i=d,h=p,e=u,s=f;break}case"A":{const d=Math.abs(c[0]),p=Math.abs(c[1]),u=c[2],f=c[3],g=c[4],M=c[5],k=c[6];d===0||p===0?(t.push({key:"C",data:[e,s,M,k,M,k]}),e=M,s=k):(e!==M||s!==k)&&(It(e,s,M,k,d,p,u,f,g).forEach(function(m){t.push({key:"C",data:m})}),e=M,s=k);break}case"Z":t.push({key:"Z",data:[]}),e=a,s=r}n=l}return t}function H(o,t,n){return[o*Math.cos(n)-t*Math.sin(n),o*Math.sin(n)+t*Math.cos(n)]}function It(o,t,n,e,s,a,r,i,h,l){const c=(d=r,Math.PI*d/180);var d;let p=[],u=0,f=0,g=0,M=0;if(l)[u,f,g,M]=l;else{[o,t]=H(o,t,-c),[n,e]=H(n,e,-c);const L=(o-n)/2,P=(t-e)/2;let W=L*L/(s*s)+P*P/(a*a);W>1&&(W=Math.sqrt(W),s*=W,a*=W);const D=s*s,E=a*a,zt=D*E-D*P*P-E*L*L,Wt=D*P*P+E*L*L,ft=(i===h?-1:1)*Math.sqrt(Math.abs(zt/Wt));g=ft*s*P/a+(o+n)/2,M=ft*-a*L/s+(t+e)/2,u=Math.asin(parseFloat(((t-M)/a).toFixed(9))),f=Math.asin(parseFloat(((e-M)/a).toFixed(9))),o<g&&(u=Math.PI-u),n<g&&(f=Math.PI-f),u<0&&(u=2*Math.PI+u),f<0&&(f=2*Math.PI+f),h&&u>f&&(u-=2*Math.PI),!h&&f>u&&(f-=2*Math.PI)}let k=f-u;if(Math.abs(k)>120*Math.PI/180){const L=f,P=n,W=e;f=h&&f>u?u+120*Math.PI/180*1:u+120*Math.PI/180*-1,p=It(n=g+s*Math.cos(f),e=M+a*Math.sin(f),P,W,s,a,r,0,h,[f,L,g,M])}k=f-u;const m=Math.cos(u),v=Math.sin(u),w=Math.cos(f),x=Math.sin(f),b=Math.tan(k/4),T=4/3*s*b,z=4/3*a*b,V=[o,t],O=[o+T*v,t-z*m],A=[n+T*x,e-z*w],pt=[n,e];if(O[0]=2*V[0]-O[0],O[1]=2*V[1]-O[1],l)return[O,A,pt].concat(p);{p=[O,A,pt].concat(p);const L=[];for(let P=0;P<p.length;P+=3){const W=H(p[P][0],p[P][1],c),D=H(p[P+1][0],p[P+1][1],c),E=H(p[P+2][0],p[P+2][1],c);L.push([W[0],W[1],D[0],D[1],E[0],E[1]])}return L}}const Xt={randOffset:function(o,t){return y(o,t)},randOffsetWithRange:function(o,t,n){return Y(o,t,n)},ellipse:function(o,t,n,e,s){const a=Lt(n,e,s);return rt(o,t,s,a).opset},doubleLineOps:function(o,t,n,e,s){return C(o,t,n,e,s,!0)}};function Tt(o,t,n,e,s){return{type:"path",ops:C(o,t,n,e,s)}}function U(o,t,n){const e=(o||[]).length;if(e>2){const s=[];for(let a=0;a<e-1;a++)s.push(...C(o[a][0],o[a][1],o[a+1][0],o[a+1][1],n));return t&&s.push(...C(o[e-1][0],o[e-1][1],o[0][0],o[0][1],n)),{type:"path",ops:s}}return e===2?Tt(o[0][0],o[0][1],o[1][0],o[1][1],n):{type:"path",ops:[]}}function Yt(o,t,n,e,s){return function(a,r){return U(a,!0,r)}([[o,t],[o+n,t],[o+n,t+e],[o,t+e]],s)}function Mt(o,t){if(o.length){const n=typeof o[0][0]=="number"?[o]:o,e=Z(n[0],1*(1+.2*t.roughness),t),s=t.disableMultiStroke?[]:Z(n[0],1.5*(1+.22*t.roughness),vt(t));for(let a=1;a<n.length;a++){const r=n[a];if(r.length){const i=Z(r,1*(1+.2*t.roughness),t),h=t.disableMultiStroke?[]:Z(r,1.5*(1+.22*t.roughness),vt(t));for(const l of i)l.op!=="move"&&e.push(l);for(const l of h)l.op!=="move"&&s.push(l)}}return{type:"path",ops:e.concat(s)}}return{type:"path",ops:[]}}function Lt(o,t,n){const e=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(o/2,2)+Math.pow(t/2,2))/2)),s=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*e)),a=2*Math.PI/s;let r=Math.abs(o/2),i=Math.abs(t/2);const h=1-n.curveFitting;return r+=y(r*h,n),i+=y(i*h,n),{increment:a,rx:r,ry:i}}function rt(o,t,n,e){const[s,a]=bt(e.increment,o,t,e.rx,e.ry,1,e.increment*Y(.1,Y(.4,1,n),n),n);let r=J(s,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[i]=bt(e.increment,o,t,e.rx,e.ry,1.5,0,n),h=J(i,null,n);r=r.concat(h)}return{estimatedPoints:a,opset:{type:"path",ops:r}}}function kt(o,t,n,e,s,a,r,i,h){const l=o,c=t;let d=Math.abs(n/2),p=Math.abs(e/2);d+=y(.01*d,h),p+=y(.01*p,h);let u=s,f=a;for(;u<0;)u+=2*Math.PI,f+=2*Math.PI;f-u>2*Math.PI&&(u=0,f=2*Math.PI);const g=2*Math.PI/h.curveStepCount,M=Math.min(g/2,(f-u)/2),k=xt(M,l,c,d,p,u,f,1,h);if(!h.disableMultiStroke){const m=xt(M,l,c,d,p,u,f,1.5,h);k.push(...m)}return r&&(i?k.push(...C(l,c,l+d*Math.cos(u),c+p*Math.sin(u),h),...C(l,c,l+d*Math.cos(f),c+p*Math.sin(f),h)):k.push({op:"lineTo",data:[l,c]},{op:"lineTo",data:[l+d*Math.cos(u),c+p*Math.sin(u)]})),{type:"path",ops:k}}function yt(o,t){const n=St(Pt(ut(o))),e=[];let s=[0,0],a=[0,0];for(const{key:r,data:i}of n)switch(r){case"M":a=[i[0],i[1]],s=[i[0],i[1]];break;case"L":e.push(...C(a[0],a[1],i[0],i[1],t)),a=[i[0],i[1]];break;case"C":{const[h,l,c,d,p,u]=i;e.push(...Jt(h,l,c,d,p,u,a,t)),a=[p,u];break}case"Z":e.push(...C(a[0],a[1],s[0],s[1],t)),a=[s[0],s[1]]}return{type:"path",ops:e}}function at(o,t){const n=[];for(const e of o)if(e.length){const s=t.maxRandomnessOffset||0,a=e.length;if(a>2){n.push({op:"move",data:[e[0][0]+y(s,t),e[0][1]+y(s,t)]});for(let r=1;r<a;r++)n.push({op:"lineTo",data:[e[r][0]+y(s,t),e[r][1]+y(s,t)]})}}return{type:"fillPath",ops:n}}function R(o,t){return function(n,e){let s=n.fillStyle||"hachure";if(!S[s])switch(s){case"zigzag":S[s]||(S[s]=new $t(e));break;case"cross-hatch":S[s]||(S[s]=new jt(e));break;case"dots":S[s]||(S[s]=new Ft(e));break;case"dashed":S[s]||(S[s]=new Zt(e));break;case"zigzag-line":S[s]||(S[s]=new Nt(e));break;default:s="hachure",S[s]||(S[s]=new ct(e))}return S[s]}(t,Xt).fillPolygons(o,t)}function vt(o){const t=Object.assign({},o);return t.randomizer=void 0,o.seed&&(t.seed=o.seed+1),t}function Ot(o){return o.randomizer||(o.randomizer=new Qt(o.seed||0)),o.randomizer.next()}function Y(o,t,n,e=1){return n.roughness*e*(Ot(n)*(t-o)+o)}function y(o,t,n=1){return Y(-o,o,t,n)}function C(o,t,n,e,s,a=!1){const r=a?s.disableMultiStrokeFill:s.disableMultiStroke,i=ht(o,t,n,e,s,!0,!1);if(r)return i;const h=ht(o,t,n,e,s,!0,!0);return i.concat(h)}function ht(o,t,n,e,s,a,r){const i=Math.pow(o-n,2)+Math.pow(t-e,2),h=Math.sqrt(i);let l=1;l=h<200?1:h>500?.4:-.0016668*h+1.233334;let c=s.maxRandomnessOffset||0;c*c*100>i&&(c=h/10);const d=c/2,p=.2+.2*Ot(s);let u=s.bowing*s.maxRandomnessOffset*(e-t)/200,f=s.bowing*s.maxRandomnessOffset*(o-n)/200;u=y(u,s,l),f=y(f,s,l);const g=[],M=()=>y(d,s,l),k=()=>y(c,s,l),m=s.preserveVertices;return r?g.push({op:"move",data:[o+(m?0:M()),t+(m?0:M())]}):g.push({op:"move",data:[o+(m?0:y(c,s,l)),t+(m?0:y(c,s,l))]}),r?g.push({op:"bcurveTo",data:[u+o+(n-o)*p+M(),f+t+(e-t)*p+M(),u+o+2*(n-o)*p+M(),f+t+2*(e-t)*p+M(),n+(m?0:M()),e+(m?0:M())]}):g.push({op:"bcurveTo",data:[u+o+(n-o)*p+k(),f+t+(e-t)*p+k(),u+o+2*(n-o)*p+k(),f+t+2*(e-t)*p+k(),n+(m?0:k()),e+(m?0:k())]}),g}function Z(o,t,n){if(!o.length)return[];const e=[];e.push([o[0][0]+y(t,n),o[0][1]+y(t,n)]),e.push([o[0][0]+y(t,n),o[0][1]+y(t,n)]);for(let s=1;s<o.length;s++)e.push([o[s][0]+y(t,n),o[s][1]+y(t,n)]),s===o.length-1&&e.push([o[s][0]+y(t,n),o[s][1]+y(t,n)]);return J(e,null,n)}function J(o,t,n){const e=o.length,s=[];if(e>3){const a=[],r=1-n.curveTightness;s.push({op:"move",data:[o[1][0],o[1][1]]});for(let i=1;i+2<e;i++){const h=o[i];a[0]=[h[0],h[1]],a[1]=[h[0]+(r*o[i+1][0]-r*o[i-1][0])/6,h[1]+(r*o[i+1][1]-r*o[i-1][1])/6],a[2]=[o[i+1][0]+(r*o[i][0]-r*o[i+2][0])/6,o[i+1][1]+(r*o[i][1]-r*o[i+2][1])/6],a[3]=[o[i+1][0],o[i+1][1]],s.push({op:"bcurveTo",data:[a[1][0],a[1][1],a[2][0],a[2][1],a[3][0],a[3][1]]})}}else e===3?(s.push({op:"move",data:[o[1][0],o[1][1]]}),s.push({op:"bcurveTo",data:[o[1][0],o[1][1],o[2][0],o[2][1],o[2][0],o[2][1]]})):e===2&&s.push(...ht(o[0][0],o[0][1],o[1][0],o[1][1],n,!0,!0));return s}function bt(o,t,n,e,s,a,r,i){const h=[],l=[];if(i.roughness===0){o/=4,l.push([t+e*Math.cos(-o),n+s*Math.sin(-o)]);for(let c=0;c<=2*Math.PI;c+=o){const d=[t+e*Math.cos(c),n+s*Math.sin(c)];h.push(d),l.push(d)}l.push([t+e*Math.cos(0),n+s*Math.sin(0)]),l.push([t+e*Math.cos(o),n+s*Math.sin(o)])}else{const c=y(.5,i)-Math.PI/2;l.push([y(a,i)+t+.9*e*Math.cos(c-o),y(a,i)+n+.9*s*Math.sin(c-o)]);const d=2*Math.PI+c-.01;for(let p=c;p<d;p+=o){const u=[y(a,i)+t+e*Math.cos(p),y(a,i)+n+s*Math.sin(p)];h.push(u),l.push(u)}l.push([y(a,i)+t+e*Math.cos(c+2*Math.PI+.5*r),y(a,i)+n+s*Math.sin(c+2*Math.PI+.5*r)]),l.push([y(a,i)+t+.98*e*Math.cos(c+r),y(a,i)+n+.98*s*Math.sin(c+r)]),l.push([y(a,i)+t+.9*e*Math.cos(c+.5*r),y(a,i)+n+.9*s*Math.sin(c+.5*r)])}return[l,h]}function xt(o,t,n,e,s,a,r,i,h){const l=a+y(.1,h),c=[];c.push([y(i,h)+t+.9*e*Math.cos(l-o),y(i,h)+n+.9*s*Math.sin(l-o)]);for(let d=l;d<=r;d+=o)c.push([y(i,h)+t+e*Math.cos(d),y(i,h)+n+s*Math.sin(d)]);return c.push([t+e*Math.cos(r),n+s*Math.sin(r)]),c.push([t+e*Math.cos(r),n+s*Math.sin(r)]),J(c,null,h)}function Jt(o,t,n,e,s,a,r,i){const h=[],l=[i.maxRandomnessOffset||1,(i.maxRandomnessOffset||1)+.3];let c=[0,0];const d=i.disableMultiStroke?1:2,p=i.preserveVertices;for(let u=0;u<d;u++)u===0?h.push({op:"move",data:[r[0],r[1]]}):h.push({op:"move",data:[r[0]+(p?0:y(l[0],i)),r[1]+(p?0:y(l[0],i))]}),c=p?[s,a]:[s+y(l[u],i),a+y(l[u],i)],h.push({op:"bcurveTo",data:[o+y(l[u],i),t+y(l[u],i),n+y(l[u],i),e+y(l[u],i),c[0],c[1]]});return h}function G(o){return[...o]}function wt(o,t=0){const n=o.length;if(n<3)throw new Error("A curve must have at least three points.");const e=[];if(n===3)e.push(G(o[0]),G(o[1]),G(o[2]),G(o[2]));else{const s=[];s.push(o[0],o[0]);for(let i=1;i<o.length;i++)s.push(o[i]),i===o.length-1&&s.push(o[i]);const a=[],r=1-t;e.push(G(s[0]));for(let i=1;i+2<s.length;i++){const h=s[i];a[0]=[h[0],h[1]],a[1]=[h[0]+(r*s[i+1][0]-r*s[i-1][0])/6,h[1]+(r*s[i+1][1]-r*s[i-1][1])/6],a[2]=[s[i+1][0]+(r*s[i][0]-r*s[i+2][0])/6,s[i+1][1]+(r*s[i][1]-r*s[i+2][1])/6],a[3]=[s[i+1][0],s[i+1][1]],e.push(a[1],a[2],a[3])}}return e}function X(o,t){return Math.pow(o[0]-t[0],2)+Math.pow(o[1]-t[1],2)}function Kt(o,t,n){const e=X(t,n);if(e===0)return X(o,t);let s=((o[0]-t[0])*(n[0]-t[0])+(o[1]-t[1])*(n[1]-t[1]))/e;return s=Math.max(0,Math.min(1,s)),X(o,_(t,n,s))}function _(o,t,n){return[o[0]+(t[0]-o[0])*n,o[1]+(t[1]-o[1])*n]}function lt(o,t,n,e){const s=e||[];if(function(i,h){const l=i[h+0],c=i[h+1],d=i[h+2],p=i[h+3];let u=3*c[0]-2*l[0]-p[0];u*=u;let f=3*c[1]-2*l[1]-p[1];f*=f;let g=3*d[0]-2*p[0]-l[0];g*=g;let M=3*d[1]-2*p[1]-l[1];return M*=M,u<g&&(u=g),f<M&&(f=M),u+f}(o,t)<n){const i=o[t+0];s.length?(a=s[s.length-1],r=i,Math.sqrt(X(a,r))>1&&s.push(i)):s.push(i),s.push(o[t+3])}else{const h=o[t+0],l=o[t+1],c=o[t+2],d=o[t+3],p=_(h,l,.5),u=_(l,c,.5),f=_(c,d,.5),g=_(p,u,.5),M=_(u,f,.5),k=_(g,M,.5);lt([h,p,g,k],0,n,s),lt([k,M,f,d],0,n,s)}var a,r;return s}function te(o,t){return K(o,0,o.length,t)}function K(o,t,n,e,s){const a=s||[],r=o[t],i=o[n-1];let h=0,l=1;for(let c=t+1;c<n-1;++c){const d=Kt(o[c],r,i);d>h&&(h=d,l=c)}return Math.sqrt(h)>e?(K(o,t,l+1,e,a),K(o,l,n,e,a)):(a.length||a.push(r),a.push(i)),a}function it(o,t=.15,n){const e=[],s=(o.length-1)/3;for(let a=0;a<s;a++)lt(o,3*a,t,e);return n&&n>0?K(e,0,e.length,n):e}const I="none";class tt{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,n,e){return{shape:t,sets:n||[],options:e||this.defaultOptions}}line(t,n,e,s,a){const r=this._o(a);return this._d("line",[Tt(t,n,e,s,r)],r)}rectangle(t,n,e,s,a){const r=this._o(a),i=[],h=Yt(t,n,e,s,r);if(r.fill){const l=[[t,n],[t+e,n],[t+e,n+s],[t,n+s]];r.fillStyle==="solid"?i.push(at([l],r)):i.push(R([l],r))}return r.stroke!==I&&i.push(h),this._d("rectangle",i,r)}ellipse(t,n,e,s,a){const r=this._o(a),i=[],h=Lt(e,s,r),l=rt(t,n,r,h);if(r.fill)if(r.fillStyle==="solid"){const c=rt(t,n,r,h).opset;c.type="fillPath",i.push(c)}else i.push(R([l.estimatedPoints],r));return r.stroke!==I&&i.push(l.opset),this._d("ellipse",i,r)}circle(t,n,e,s){const a=this.ellipse(t,n,e,e,s);return a.shape="circle",a}linearPath(t,n){const e=this._o(n);return this._d("linearPath",[U(t,!1,e)],e)}arc(t,n,e,s,a,r,i=!1,h){const l=this._o(h),c=[],d=kt(t,n,e,s,a,r,i,!0,l);if(i&&l.fill)if(l.fillStyle==="solid"){const p=Object.assign({},l);p.disableMultiStroke=!0;const u=kt(t,n,e,s,a,r,!0,!1,p);u.type="fillPath",c.push(u)}else c.push(function(p,u,f,g,M,k,m){const v=p,w=u;let x=Math.abs(f/2),b=Math.abs(g/2);x+=y(.01*x,m),b+=y(.01*b,m);let T=M,z=k;for(;T<0;)T+=2*Math.PI,z+=2*Math.PI;z-T>2*Math.PI&&(T=0,z=2*Math.PI);const V=(z-T)/m.curveStepCount,O=[];for(let A=T;A<=z;A+=V)O.push([v+x*Math.cos(A),w+b*Math.sin(A)]);return O.push([v+x*Math.cos(z),w+b*Math.sin(z)]),O.push([v,w]),R([O],m)}(t,n,e,s,a,r,l));return l.stroke!==I&&c.push(d),this._d("arc",c,l)}curve(t,n){const e=this._o(n),s=[],a=Mt(t,e);if(e.fill&&e.fill!==I)if(e.fillStyle==="solid"){const r=Mt(t,Object.assign(Object.assign({},e),{disableMultiStroke:!0,roughness:e.roughness?e.roughness+e.fillShapeRoughnessGain:0}));s.push({type:"fillPath",ops:this._mergedShape(r.ops)})}else{const r=[],i=t;if(i.length){const h=typeof i[0][0]=="number"?[i]:i;for(const l of h)l.length<3?r.push(...l):l.length===3?r.push(...it(wt([l[0],l[0],l[1],l[2]]),10,(1+e.roughness)/2)):r.push(...it(wt(l),10,(1+e.roughness)/2))}r.length&&s.push(R([r],e))}return e.stroke!==I&&s.push(a),this._d("curve",s,e)}polygon(t,n){const e=this._o(n),s=[],a=U(t,!0,e);return e.fill&&(e.fillStyle==="solid"?s.push(at([t],e)):s.push(R([t],e))),e.stroke!==I&&s.push(a),this._d("polygon",s,e)}path(t,n){const e=this._o(n),s=[];if(!t)return this._d("path",s,e);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const a=e.fill&&e.fill!=="transparent"&&e.fill!==I,r=e.stroke!==I,i=!!(e.simplification&&e.simplification<1),h=function(c,d,p){const u=St(Pt(ut(c))),f=[];let g=[],M=[0,0],k=[];const m=()=>{k.length>=4&&g.push(...it(k,d)),k=[]},v=()=>{m(),g.length&&(f.push(g),g=[])};for(const{key:x,data:b}of u)switch(x){case"M":v(),M=[b[0],b[1]],g.push(M);break;case"L":m(),g.push([b[0],b[1]]);break;case"C":if(!k.length){const T=g.length?g[g.length-1]:M;k.push([T[0],T[1]])}k.push([b[0],b[1]]),k.push([b[2],b[3]]),k.push([b[4],b[5]]);break;case"Z":m(),g.push([M[0],M[1]])}if(v(),!p)return f;const w=[];for(const x of f){const b=te(x,p);b.length&&w.push(b)}return w}(t,1,i?4-4*(e.simplification||1):(1+e.roughness)/2),l=yt(t,e);if(a)if(e.fillStyle==="solid")if(h.length===1){const c=yt(t,Object.assign(Object.assign({},e),{disableMultiStroke:!0,roughness:e.roughness?e.roughness+e.fillShapeRoughnessGain:0}));s.push({type:"fillPath",ops:this._mergedShape(c.ops)})}else s.push(at(h,e));else s.push(R(h,e));return r&&(i?h.forEach(c=>{s.push(U(c,!1,e))}):s.push(l)),this._d("path",s,e)}opsToPath(t,n){let e="";for(const s of t.ops){const a=typeof n=="number"&&n>=0?s.data.map(r=>+r.toFixed(n)):s.data;switch(s.op){case"move":e+=`M${a[0]} ${a[1]} `;break;case"bcurveTo":e+=`C${a[0]} ${a[1]}, ${a[2]} ${a[3]}, ${a[4]} ${a[5]} `;break;case"lineTo":e+=`L${a[0]} ${a[1]} `}}return e.trim()}toPaths(t){const n=t.sets||[],e=t.options||this.defaultOptions,s=[];for(const a of n){let r=null;switch(a.type){case"path":r={d:this.opsToPath(a),stroke:e.stroke,strokeWidth:e.strokeWidth,fill:I};break;case"fillPath":r={d:this.opsToPath(a),stroke:I,strokeWidth:0,fill:e.fill||I};break;case"fillSketch":r=this.fillSketch(a,e)}r&&s.push(r)}return s}fillSketch(t,n){let e=n.fillWeight;return e<0&&(e=n.strokeWidth/2),{d:this.opsToPath(t),stroke:n.fill||I,strokeWidth:e,fill:I}}_mergedShape(t){return t.filter((n,e)=>e===0||n.op!=="move")}}class ee{constructor(t,n){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new tt(n)}draw(t){const n=t.sets||[],e=t.options||this.getDefaultOptions(),s=this.ctx,a=t.options.fixedDecimalPlaceDigits;for(const r of n)switch(r.type){case"path":s.save(),s.strokeStyle=e.stroke==="none"?"transparent":e.stroke,s.lineWidth=e.strokeWidth,e.strokeLineDash&&s.setLineDash(e.strokeLineDash),e.strokeLineDashOffset&&(s.lineDashOffset=e.strokeLineDashOffset),this._drawToContext(s,r,a),s.restore();break;case"fillPath":{s.save(),s.fillStyle=e.fill||"";const i=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(s,r,a,i),s.restore();break}case"fillSketch":this.fillSketch(s,r,e)}}fillSketch(t,n,e){let s=e.fillWeight;s<0&&(s=e.strokeWidth/2),t.save(),e.fillLineDash&&t.setLineDash(e.fillLineDash),e.fillLineDashOffset&&(t.lineDashOffset=e.fillLineDashOffset),t.strokeStyle=e.fill||"",t.lineWidth=s,this._drawToContext(t,n,e.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,n,e,s="nonzero"){t.beginPath();for(const a of n.ops){const r=typeof e=="number"&&e>=0?a.data.map(i=>+i.toFixed(e)):a.data;switch(a.op){case"move":t.moveTo(r[0],r[1]);break;case"bcurveTo":t.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);break;case"lineTo":t.lineTo(r[0],r[1])}}n.type==="fillPath"?t.fill(s):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,n,e,s,a){const r=this.gen.line(t,n,e,s,a);return this.draw(r),r}rectangle(t,n,e,s,a){const r=this.gen.rectangle(t,n,e,s,a);return this.draw(r),r}ellipse(t,n,e,s,a){const r=this.gen.ellipse(t,n,e,s,a);return this.draw(r),r}circle(t,n,e,s){const a=this.gen.circle(t,n,e,s);return this.draw(a),a}linearPath(t,n){const e=this.gen.linearPath(t,n);return this.draw(e),e}polygon(t,n){const e=this.gen.polygon(t,n);return this.draw(e),e}arc(t,n,e,s,a,r,i=!1,h){const l=this.gen.arc(t,n,e,s,a,r,i,h);return this.draw(l),l}curve(t,n){const e=this.gen.curve(t,n);return this.draw(e),e}path(t,n){const e=this.gen.path(t,n);return this.draw(e),e}}const N="http://www.w3.org/2000/svg";class se{constructor(t,n){this.svg=t,this.gen=new tt(n)}draw(t){const n=t.sets||[],e=t.options||this.getDefaultOptions(),s=this.svg.ownerDocument||window.document,a=s.createElementNS(N,"g"),r=t.options.fixedDecimalPlaceDigits;for(const i of n){let h=null;switch(i.type){case"path":h=s.createElementNS(N,"path"),h.setAttribute("d",this.opsToPath(i,r)),h.setAttribute("stroke",e.stroke),h.setAttribute("stroke-width",e.strokeWidth+""),h.setAttribute("fill","none"),e.strokeLineDash&&h.setAttribute("stroke-dasharray",e.strokeLineDash.join(" ").trim()),e.strokeLineDashOffset&&h.setAttribute("stroke-dashoffset",`${e.strokeLineDashOffset}`);break;case"fillPath":h=s.createElementNS(N,"path"),h.setAttribute("d",this.opsToPath(i,r)),h.setAttribute("stroke","none"),h.setAttribute("stroke-width","0"),h.setAttribute("fill",e.fill||""),t.shape!=="curve"&&t.shape!=="polygon"||h.setAttribute("fill-rule","evenodd");break;case"fillSketch":h=this.fillSketch(s,i,e)}h&&a.appendChild(h)}return a}fillSketch(t,n,e){let s=e.fillWeight;s<0&&(s=e.strokeWidth/2);const a=t.createElementNS(N,"path");return a.setAttribute("d",this.opsToPath(n,e.fixedDecimalPlaceDigits)),a.setAttribute("stroke",e.fill||""),a.setAttribute("stroke-width",s+""),a.setAttribute("fill","none"),e.fillLineDash&&a.setAttribute("stroke-dasharray",e.fillLineDash.join(" ").trim()),e.fillLineDashOffset&&a.setAttribute("stroke-dashoffset",`${e.fillLineDashOffset}`),a}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,n){return this.gen.opsToPath(t,n)}line(t,n,e,s,a){const r=this.gen.line(t,n,e,s,a);return this.draw(r)}rectangle(t,n,e,s,a){const r=this.gen.rectangle(t,n,e,s,a);return this.draw(r)}ellipse(t,n,e,s,a){const r=this.gen.ellipse(t,n,e,s,a);return this.draw(r)}circle(t,n,e,s){const a=this.gen.circle(t,n,e,s);return this.draw(a)}linearPath(t,n){const e=this.gen.linearPath(t,n);return this.draw(e)}polygon(t,n){const e=this.gen.polygon(t,n);return this.draw(e)}arc(t,n,e,s,a,r,i=!1,h){const l=this.gen.arc(t,n,e,s,a,r,i,h);return this.draw(l)}curve(t,n){const e=this.gen.curve(t,n);return this.draw(e)}path(t,n){const e=this.gen.path(t,n);return this.draw(e)}}var Q={canvas:(o,t)=>new ee(o,t),svg:(o,t)=>new se(o,t),generator:o=>new tt(o),newSeed:()=>tt.newSeed()};const ne="/images/R-C-gray.png",oe={name:"TwoDimensional",data(){return{canvases:Ct,fillStyles:["solid","hachure","zigzag","cross-hatch","dots","zigzag-line","zigzag-line-2"],positions:[],highlightIndex:null,cachePosition:{index:-1,top:0,left:0},isPlay:!1,musicUrl:"",paths:["M194.4132304 88.8896729H18.8166116V40.6438809h175.5966188v48.245792z m-172.585961-1.5053289h169.5753032V42.1492098H21.8272694v45.2351322z","M47.8694598 81.7393605c-12.5694966 0-22.8057332-10.2362366-22.8057332-22.8057332 0-12.5694966 10.2362366-22.8057332 22.8057332-22.8057332s22.8057332 10.2362366 22.8057332 22.8057332c0 12.5694966-10.2362366 22.8057332-22.8057332 22.8057332z m0-21.3004042c-10.9136346 0-19.7950754 8.8814406-19.7950754 19.7950754s8.8814406 19.7950754 19.7950754 19.7950754 19.7950754-8.8814406 19.7950752-19.7950754-8.8814406-19.7950754-19.7950752-19.7950754zM165.2851158 81.7393605c-12.5694966 0-22.8057332-10.2362366-22.8057332-22.8057332 0-12.5694966 10.2362366-22.8057332 22.8057332-22.8057332 12.5694966 0 22.8057332 10.2362366 22.8057332 22.8057332 0 12.5694966-10.2362366 22.8057332-22.8057332 22.8057332z m0-21.3004042c-10.9136346 0-19.7950754 8.8814406-19.7950754 19.7950754s8.8814406 19.7950754 19.7950754 19.7950754 19.7950754-8.8814406 19.7950754-19.7950754-8.8814406-19.7950754-19.7950754-19.7950754zM134.802205 79.6319h-54.492907c-1.2795296 0-2.2579934-0.9784638-2.2579934-2.2579934v-13.3597941c0-1.2795296 0.9784638-2.2579934 2.2579934-2.2579934h54.492907c1.2795296 0 2.2579934 0.9784638 2.2579934 2.2579934v13.3597941c0 1.2042632-1.0537302 2.2579934-2.2579934 2.2579934z m-53.7402424-1.5053289h52.987578v-12.6071297h-52.987578v12.6071297z","M86.2553472 68.3795663h42.676075v1.505329h-42.676075zM84.7500184 73.6482176h3.0106578v3.0859243h-3.0106578zM91.1476662 73.6482176h3.010658v3.0859243h-3.010658zM97.4700478 73.6482176h3.0106578v3.0859243h-3.0106578zM103.8676956 73.6482176h3.0106578v3.0859243h-3.0106578zM110.1900772 73.6482176h3.0106578v3.0859243h-3.0106578zM116.5124588 73.6482176h3.0106578v3.0859243h-3.0106578zM122.8348404 73.6482176h3.0106578v3.0859243h-3.0106578zM129.157222 73.6482176h3.0106578v3.0859243h-3.0106578zM179.3599412 54.0413083H33.568835c-1.2042632 0-2.2579934-1.0537302-2.2579934-2.2579932v-5.6449835c0-1.2042632 1.0537302-2.2579934 2.2579934-2.2579934h145.7911062c1.2795296 0 2.2579934 0.9784638 2.2579934 2.2579934v5.2688445c-0.2257994 1.2042632-1.2042632 1.9569276-2.3332598 1.9569276z m-145.0384418-1.5053289h144.3610438v-4.892319H34.1214994v4.892319z","M184.402793 42.1492098H44.3319368c-1.2042632 0-2.2579934-1.0537302-2.2579934-2.2579932V25.2895259c0-1.2795296 0.9784638-2.2579934 2.2579934-2.2579934H184.402793c1.2795296 0 2.2579934 0.9784638 2.2579934 2.2579934v14.6542732c0 1.2795296-0.9784638 2.2579934-2.2579934 2.2579932z m-125.7702316-1.5053289h124.6829676V25.6658581H58.6325612V40.6438809zM187.940316 42.1492098h-7.0000002c-1.2795296 0-2.2579934-0.9784638-2.2579934-2.2579932v-2.9353914c0-1.2795296 0.9784638-2.2579934 2.2579934-2.2579934h7.0000002c1.2795296 0 2.2579934 0.9784638 2.2579934 2.2579934v2.9353914c0 1.2795296-0.9784638 2.2579934-2.2579934 2.2579932z m-6.247335-1.5053289h5.4946706v-2.1827269h-5.4946706v2.1827269z","M184.402793 37.7084895c-0.827931 0-1.505329-0.338699-1.505329-0.752664v-27.4722529c0-0.827931 0.338699-1.505329 1.505329-1.505329s1.505329 0.338699 1.505329 1.505329v27.4722529c0 0.827931-0.338699 1.505329-1.505329 1.505329z"],isAbsorbing:!1,vortexScale:1,vortexImgLeft:0,vortexImgTop:300,vortexImgScale:1,isOver:!1}},created(){},mounted(){this.init()},methods:{init(){const o=window.innerWidth/2,t=window.innerHeight/2,n=80,e=60;this.positions=this.canvases.map(()=>({top:Math.floor(Math.random()*(t-e)),left:Math.floor(Math.random()*(o-n))+200})),this.$nextTick(()=>{this.canvases.forEach(s=>{this.drawTapes(s)}),this.drawTapePlayer("tapePlayer"),this.drawVortex()})},drawTapes(o){Q.canvas(document.getElementById(o.name)).path(o.path,{fill:"rgba(122,252,200,0.8)",fillStyle:"solid",stroke:"black",strokeWidth:2,roughness:1.5})},clickTape(o){this.isPlay=!1;const t=this.canvases.indexOf(o);if(t!==-1){this.cachePosition.index!==-1?(this.positions[this.cachePosition.index]={top:this.cachePosition.top,left:this.cachePosition.left},this.drawTapes(this.canvases[this.cachePosition.index])):this.drawPlayButton(),this.cachePosition={...this.positions[t],index:t};const n=document.getElementById("tapePlayer"),e=document.querySelector(".twoParent"),s=n.getBoundingClientRect(),a=e.getBoundingClientRect(),r=s.left+s.width/2-a.left-30,i=s.top+s.height/2-a.top;this.positions[t].top=i,this.positions[t].left=r}this.musicUrl=o.url||""},drawTapePlayer(o,t){const n=Q.canvas(document.getElementById(o)),e=document.getElementById(o).getContext("2d");e.clearRect(0,0,400,200);const s=1.5;e.save(),e.translate(200/2+40,100/2+20),e.scale(s,s),e.translate(-200/2,-100/2);for(let a=0;a<5;a++)if(a==2){n.path(this.paths[a],t||{fill:"rgba(255,255,255,1)",fillStyle:"solid",stroke:"black",strokeWidth:1,roughness:1.2});continue}else n.path(this.paths[a],{fill:"rgba(102,102,102,1)",fillStyle:"hachure",stroke:"black",strokeWidth:1,roughness:1.2});e.restore()},drawPlayButton(){const o=document.getElementById("playButton");o.getContext("2d").clearRect(0,0,o.width,o.height);const n=Q.canvas(o),e=o.width,s=o.height;if(this.isPlay){const l=(e-150)/2,c=(s-100)/2;n.rectangle(l,c,60,100,{fill:"red",hachureAngle:6,hachureGap:8}),n.rectangle(l+60+30,c,60,100,{fill:"red",hachureAngle:6,hachureGap:8})}else{const i=(e-110)/2,h=(s-110)/2,l=`M ${i} ${h} L ${i} ${h+110} L ${i+110} ${h+110/2} Z`;n.path(l,{fill:"blue",fillStyle:"cross-hatch",stroke:"black",strokeWidth:2,roughness:1.5})}},togglePlay(){this.isPlay=!this.isPlay,this.isPlay?(this.audio=new Audio(this.musicUrl),this.audio.addEventListener("timeupdate",()=>{const o=this.audio.currentTime;for(let t=this.lyrics.length-1;t>=0;t--)if(o>=this.lyrics[t].time){this.dynamicText=this.lyrics[t].text;break}}),this.audio.play()):this.audio.pause(),this.drawPlayButton()},drawVortex(o){const t=document.getElementById("vortex"),n=t.getContext("2d");this.vortexImgRotation(o);let e;const s=Q.canvas(t);o%20===0&&(n.clearRect(220,0,t.width,t.height),e=o/20%3,this.drawVortexAuxiliaryLine(s,e))},vortexImgRotation(o){const t=document.getElementById("vortexImage");t.style.transform=`rotate(${o}deg)`},drawVortexAuxiliaryLine(o,t){let n=t*Math.PI/8,e=(t+1)*Math.PI/8;o.arc(240,20,40,30,n,e,!1,{stroke:"black",strokeWidth:.4,roughness:1.5}),o.arc(220,20,40,30,n,e,!1,{stroke:"black",strokeWidth:.4,roughness:1.5}),o.arc(220,50,40,30,n,e,!1,{stroke:"black",strokeWidth:.4,roughness:1.5}),n=-(t+1)*Math.PI/8,e=-t*Math.PI/8,o.arc(240,120,40,30,n,e,!1,{stroke:"black",strokeWidth:.4,roughness:1.5}),o.arc(220,120,40,30,n,e,!1,{stroke:"black",strokeWidth:.4,roughness:1.5}),o.arc(220,90,40,30,n,e,!1,{stroke:"black",strokeWidth:.4,roughness:1.5})},portal(){if(this.isAbsorbing)return;this.isAbsorbing=!0;const t=document.getElementById("vortex").getBoundingClientRect(),n=document.querySelector(".twoParent").getBoundingClientRect(),e=t.left+t.width/2-n.left,s=t.top+t.height/2-n.top,a=document.getElementById("vortexImage"),r=a.getBoundingClientRect();this.vortexImgLeft=a.offsetLeft,this.vortexImgTop=a.offsetTop;const i=n.width/2-r.width/2,h=n.height/2-r.height/2;this.canvases.forEach((l,c)=>{setTimeout(()=>{this.positions[c].highlight=!1,this.positions[c].top=s-27,this.positions[c].left=e-32},c*60)}),setTimeout(()=>{this.isOver=!0,this.vortexImgScale=1;let l=0;document.getElementById("vortexImage").classList.add("shake"),setTimeout(()=>{document.getElementById("vortexImage").classList.remove("shake"),c()},800);const c=()=>{this.vortexImgScale<10?(this.vortexImgScale+=.2,l=Math.min((this.vortexImgScale-1)/2,1),this.vortexImgLeft=this.vortexImgLeft*(1-l)+i*l,this.vortexImgTop=this.vortexImgTop*(1-l)+h*l,requestAnimationFrame(c),this.vortexImgScale>=9.6&&window.open("/","_self")):console.log("吸入完成, 跳转失败")}},this.canvases.length*60)}},watch:{isPlay(o){console.log("isPlay changed:",o),this.audio&&(this.audio.pause(),this.audio=null),o&&this.musicUrl&&(this.audio=new Audio(this.musicUrl),this.audio.play()),this.drawPlayButton()},count(o){if(this.isPlay&&this.count%30===0){let t={fill:`rgba(${o}%255, ${o}%200, ${o}%100, 0.8)`,fillStyle:this.fillStyles[o%this.fillStyles.length],stroke:"black",strokeWidth:1,roughness:1.2};this.drawTapePlayer("tapePlayer",t)}this.drawVortex(o%360)},highlightIndex(o){o!==null?this.positions[o].highlight=!0:this.positions.forEach(t=>t.highlight=!1)}},setup(){const o=Bt(0);let t=null;return Ht(()=>{t=setInterval(()=>{o.value++},10)}),Gt(()=>{clearInterval(t)}),{count:o}}},ae={key:0,class:"twoParent"},ie=["onMouseenter","onClick"],re=["id"];function he(o,t,n,e,s,a){return j(),$("div",null,[_t(Dt(e.count)+" ",1),s.positions.length===s.canvases.length?(j(),$("div",ae,[s.isOver?dt("",!0):(j(!0),$(Et,{key:0},Rt(s.canvases,(r,i)=>(j(),$("div",{key:r.name,class:"canvas-wrapper",style:gt({top:s.positions[i].top+"px",left:s.positions[i].left+"px",boxShadow:s.positions[i].highlight&s.canvases[i].type=="tape"?"0 0 10px 3px #eecd98":"",zIndex:s.canvases[i].type=="tape"?101:100}),onMouseenter:h=>s.highlightIndex=i,onMouseleave:t[0]||(t[0]=h=>s.highlightIndex=null),onClick:h=>r.type=="tape"?a.clickTape(r):null},[B("canvas",{id:r.name,width:"64",height:"54"},null,8,re)],44,ie))),128)),t[3]||(t[3]=B("canvas",{class:"tapePlayer",id:"tapePlayer"},null,-1)),B("canvas",{disabled:!0,class:"playButton",id:"playButton",onClick:t[1]||(t[1]=(...r)=>a.togglePlay&&a.togglePlay(...r))}),B("img",{id:"vortexImage",class:"vortex",src:ne,style:gt({left:s.vortexImgLeft+"px",top:s.vortexImgTop+"px",transform:`scale(${s.vortexImgScale}) rotate(${e.count%360}deg)`,transition:s.isOver?"none":"left 0.2s, top 0.2s"})},null,4),B("canvas",{class:"vortex-line",id:"vortex",onClick:t[2]||(t[2]=(...r)=>a.portal&&a.portal(...r))})])):dt("",!0)])}const pe=At(oe,[["render",he]]);export{pe as default};
