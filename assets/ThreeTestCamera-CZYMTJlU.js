import{b as S,c as d,a as p,B as f,d as v,e as x,W as b,f as m,S as C,C as M,T as R,R as u,N as G,D as B,g as D,P as g,h as T}from"./three.module-6JvuBSha.js";import{g as _}from"./lil-gui.module.min-Vka56b52.js";import{C as k,O as w}from"./ColorGuiHelper-BEkEks8z.js";import{_ as z}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as H,o as P,f as n}from"./app-D749CWGi.js";const y={mounted(){this.initThree()},methods:{initThree(){this.scene=this.createScene(),this.gui=new _;const e=this.$refs.threeCanvas;this.renderer=this.createRenderer(e),this.camera=this.createCamera(),this.camera2=this.createCamera2();const t=document.querySelector("#view1"),s=document.querySelector("#view2");this.controls=new w(this.camera,t),this.controls.target.set(1,5,10),this.controls.update(),this.controls2=new w(this.camera2,s),this.controls2.target.set(1,5,10),this.controls2.update(),this.createDicLight();const r=40;this.texture=this.createTexture(r);const a=this.createPalnMesh(this.texture,r);this.scene.add(a);const i=this.createBoxMesh();this.scene.add(i);const o=this.createSphere();this.scene.add(o),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.animate)},createCamera(){const e=new g(45,2,.1,100);e.position.set(0,10,20);const t=new T(e);return this.scene.add(t),e},createCamera2(){const e=new g(60,2,.1,500);return e.position.set(40,10,30),e.lookAt(0,5,0),e},createDicLight(){const e=new B(16777215,1);e.position.set(0,10,0),e.target.position.set(-5,0,0),this.scene.add(e.target),this.gui.addColor(new k(e,"color"),"value").name("color"),this.gui.add(e,"intensity",0,5,.01);const t=new D(e);this.scene.add(t);function s(){e.target.updateMatrixWorld(),t.update()}s(),this.makeXYZGUI(this.gui,e.position,"position",s),this.makeXYZGUI(this.gui,e.target.position,"target",s),this.scene.add(e)},createTexture(e){const s=new R().load("/images/checker.png");s.wrapS=u,s.wrapT=u,s.magFilter=G,s.colorSpace=m;const r=e/2;return s.repeat.set(r,r),s},createScene(){const e=new C;return e.background=new M("#aaa"),e},createRenderer(e){const t=new b({canvas:e,antialias:!0});t.outputColorSpace=m;const s=window.devicePixelRatio;return t.setPixelRatio(s),t.setSize(window.innerWidth,window.innerHeight,!1),t},createPalnMesh(e,t){const s=new v(t,t),r=new d({map:e,side:x}),a=new p(s,r);return a.rotation.x=Math.PI*-.5,a},createBoxMesh(){const t=new f(4,4,4),s=new d({color:"#8AC"}),r=new p(t,s);return r.position.set(5,4/2,0),r},makeXYZGUI(e,t,s,r){const a=e.addFolder(s);a.add(t,"x",-10,10).onChange(r),a.add(t,"y",0,10).onChange(r),a.add(t,"z",-10,10).onChange(r),a.open()},createSphere(){const r=new S(3,32,16),a=new d({color:"#CA8"}),i=new p(r,a);return i.position.set(-4,5,0),i},setScissorForElement(e){const t=canvas.getBoundingClientRect(),s=e.getBoundingClientRect(),r=Math.min(s.right,t.right)-t.left,a=Math.max(0,s.left-t.left),i=Math.min(s.bottom,t.bottom)-t.top,o=Math.max(0,s.top-t.top),c=Math.min(t.width,r-a),h=Math.min(t.height,i-o),l=t.height-i;return renderer.setScissor(a,l,c,h),renderer.setViewport(a,l,c,h),c/h},animate(){requestAnimationFrame(this.animate),resizeRendererToDisplaySize(this.animate),renderer.setScissorTest(!0);{const e=setScissorForElement(view1Elem);camera.aspect=e,camera.updateProjectionMatrix(),cameraHelper.update(),cameraHelper.visible=!1,scene.background.set(0),renderer.render(scene,camera)}{const e=setScissorForElement(view2Elem);camera2.aspect=e,camera2.updateProjectionMatrix(),cameraHelper.visible=!0,scene.background.set(64),renderer.render(scene,camera2)}this.renderer.render(this.scene,this.camera)}}},E={id:"c",class:"threeCanvas",ref:"threeCanvas"};function L(e,t,s,r,a,i){return P(),H("div",null,[n("canvas",E,null,512),t[0]||(t[0]=n("div",{class:"split"},[n("div",{id:"view1",tabindex:"1"}),n("div",{id:"view2",tabindex:"2"})],-1))])}const $=z(y,[["render",L],["__scopeId","data-v-684ee4d8"]]);export{$ as default};
