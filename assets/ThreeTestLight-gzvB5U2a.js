import{a0 as Et,aG as xt,M as bt,a as ht,L as Gt,F as Bt,aH as lt,V as D,d as mt,aI as Ot,aJ as Vt,aK as jt,aL as It,o as Tt,aM as ct,ap as Ht,Z as Nt,aN as Wt,at as qt,B as zt,ao as Dt,t as Ut,H as Ct,G as Ft,aO as vt,b as Xt,p as Yt,aP as Zt,q as Qt,aQ as Jt,D as $t,aR as Kt,au as _t,P as te,W as ee,S as ne,C as se}from"./three.module-DVEct7hv.js";import{g as ut,C as ft,D as gt}from"./ThreeGUIHelper-YMjWUHqr.js";import{O as oe}from"./OrbitControls-DwG8HtnJ.js";import{R as ie}from"./RectAreaLightUniformsLib-CBHxNDy4.js";import{R as re}from"./RectAreaLightHelper-CiKPQp16.js";import{_ as ae}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as ce,o as le,a as fe}from"./app-XDaGyvDc.js";function ue(R=1,g=.3,m=.3){const f=Math.PI/5,h=[],G=[],Y=0,X=0,z=[],J=[];for(let l=0;l<10;l++){const I=l%2===0?R:R*.4,E=l*f-Math.PI/2,N=Math.cos(E)*I,O=Math.sin(E)*I;z.push([N,O,Y]),J.push([N,O,X])}[...z,...J].forEach(l=>h.push(...l));const V=h.length/3,nt=[0,0,Y+g],v=[0,0,X-m];h.push(...nt),h.push(...v);const k=V,b=V+1;for(let l=0;l<z.length;l++){const I=(l+1)%z.length;G.push(k,l,I),G.push(b,z.length+I,z.length+l)}const C=new Et;C.setAttribute("position",new xt(h,3)),C.setIndex(G),C.computeVertexNormals();const j=new bt({color:14562840,metalness:.5,roughness:.1});return new ht(C,j)}const he=Tt;class wt extends Gt{constructor(g){super(g),this.defaultDPI=90,this.defaultUnit="px"}load(g,m,x,f){const h=this,G=new Bt(h.manager);G.setPath(h.path),G.setRequestHeader(h.requestHeader),G.setWithCredentials(h.withCredentials),G.load(g,function(Y){try{m(h.parse(Y))}catch(X){f?f(X):console.error(X),h.manager.itemError(g)}},x,f)}parse(g){const m=this;function x(i,s){if(i.nodeType!==1)return;const e=I(i);let t=!1,a=null;switch(i.nodeName){case"svg":s=v(i,s);break;case"style":h(i);break;case"g":s=v(i,s);break;case"path":s=v(i,s),i.hasAttribute("d")&&(a=f(i));break;case"rect":s=v(i,s),a=X(i);break;case"polygon":s=v(i,s),a=z(i);break;case"polyline":s=v(i,s),a=J(i);break;case"circle":s=v(i,s),a=W(i);break;case"ellipse":s=v(i,s),a=V(i);break;case"line":s=v(i,s),a=nt(i);break;case"defs":t=!0;break;case"use":s=v(i,s);const y=(i.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),w=i.viewportElement.getElementById(y);w?x(w,s):console.warn("SVGLoader: 'use node' references non-existent node id: "+y);break}a&&(s.fill!==void 0&&s.fill!=="none"&&a.color.setStyle(s.fill,he),N(a,ot),P.push(a),a.userData={node:i,style:s});const d=i.childNodes;for(let r=0;r<d.length;r++){const y=d[r];t&&y.nodeName!=="style"&&y.nodeName!=="defs"||x(y,s)}e&&(F.pop(),F.length>0?ot.copy(F[F.length-1]):ot.identity())}function f(i){const s=new ct,e=new D,t=new D,a=new D;let d=!0,r=!1;const y=i.getAttribute("d");if(y===""||y==="none")return null;const w=y.match(/[a-df-z][^a-df-z]*/ig);for(let M=0,c=w.length;M<c;M++){const u=w[M],T=u.charAt(0),S=u.slice(1).trim();d===!0&&(r=!0,d=!1);let o;switch(T){case"M":o=b(S);for(let n=0,A=o.length;n<A;n+=2)e.x=o[n+0],e.y=o[n+1],t.x=e.x,t.y=e.y,n===0?s.moveTo(e.x,e.y):s.lineTo(e.x,e.y),n===0&&a.copy(e);break;case"H":o=b(S);for(let n=0,A=o.length;n<A;n++)e.x=o[n],t.x=e.x,t.y=e.y,s.lineTo(e.x,e.y),n===0&&r===!0&&a.copy(e);break;case"V":o=b(S);for(let n=0,A=o.length;n<A;n++)e.y=o[n],t.x=e.x,t.y=e.y,s.lineTo(e.x,e.y),n===0&&r===!0&&a.copy(e);break;case"L":o=b(S);for(let n=0,A=o.length;n<A;n+=2)e.x=o[n+0],e.y=o[n+1],t.x=e.x,t.y=e.y,s.lineTo(e.x,e.y),n===0&&r===!0&&a.copy(e);break;case"C":o=b(S);for(let n=0,A=o.length;n<A;n+=6)s.bezierCurveTo(o[n+0],o[n+1],o[n+2],o[n+3],o[n+4],o[n+5]),t.x=o[n+2],t.y=o[n+3],e.x=o[n+4],e.y=o[n+5],n===0&&r===!0&&a.copy(e);break;case"S":o=b(S);for(let n=0,A=o.length;n<A;n+=4)s.bezierCurveTo(k(e.x,t.x),k(e.y,t.y),o[n+0],o[n+1],o[n+2],o[n+3]),t.x=o[n+0],t.y=o[n+1],e.x=o[n+2],e.y=o[n+3],n===0&&r===!0&&a.copy(e);break;case"Q":o=b(S);for(let n=0,A=o.length;n<A;n+=4)s.quadraticCurveTo(o[n+0],o[n+1],o[n+2],o[n+3]),t.x=o[n+0],t.y=o[n+1],e.x=o[n+2],e.y=o[n+3],n===0&&r===!0&&a.copy(e);break;case"T":o=b(S);for(let n=0,A=o.length;n<A;n+=2){const q=k(e.x,t.x),st=k(e.y,t.y);s.quadraticCurveTo(q,st,o[n+0],o[n+1]),t.x=q,t.y=st,e.x=o[n+0],e.y=o[n+1],n===0&&r===!0&&a.copy(e)}break;case"A":o=b(S,[3,4],7);for(let n=0,A=o.length;n<A;n+=7){if(o[n+5]==e.x&&o[n+6]==e.y)continue;const q=e.clone();e.x=o[n+5],e.y=o[n+6],t.x=e.x,t.y=e.y,G(s,o[n],o[n+1],o[n+2],o[n+3],o[n+4],q,e),n===0&&r===!0&&a.copy(e)}break;case"m":o=b(S);for(let n=0,A=o.length;n<A;n+=2)e.x+=o[n+0],e.y+=o[n+1],t.x=e.x,t.y=e.y,n===0?s.moveTo(e.x,e.y):s.lineTo(e.x,e.y),n===0&&a.copy(e);break;case"h":o=b(S);for(let n=0,A=o.length;n<A;n++)e.x+=o[n],t.x=e.x,t.y=e.y,s.lineTo(e.x,e.y),n===0&&r===!0&&a.copy(e);break;case"v":o=b(S);for(let n=0,A=o.length;n<A;n++)e.y+=o[n],t.x=e.x,t.y=e.y,s.lineTo(e.x,e.y),n===0&&r===!0&&a.copy(e);break;case"l":o=b(S);for(let n=0,A=o.length;n<A;n+=2)e.x+=o[n+0],e.y+=o[n+1],t.x=e.x,t.y=e.y,s.lineTo(e.x,e.y),n===0&&r===!0&&a.copy(e);break;case"c":o=b(S);for(let n=0,A=o.length;n<A;n+=6)s.bezierCurveTo(e.x+o[n+0],e.y+o[n+1],e.x+o[n+2],e.y+o[n+3],e.x+o[n+4],e.y+o[n+5]),t.x=e.x+o[n+2],t.y=e.y+o[n+3],e.x+=o[n+4],e.y+=o[n+5],n===0&&r===!0&&a.copy(e);break;case"s":o=b(S);for(let n=0,A=o.length;n<A;n+=4)s.bezierCurveTo(k(e.x,t.x),k(e.y,t.y),e.x+o[n+0],e.y+o[n+1],e.x+o[n+2],e.y+o[n+3]),t.x=e.x+o[n+0],t.y=e.y+o[n+1],e.x+=o[n+2],e.y+=o[n+3],n===0&&r===!0&&a.copy(e);break;case"q":o=b(S);for(let n=0,A=o.length;n<A;n+=4)s.quadraticCurveTo(e.x+o[n+0],e.y+o[n+1],e.x+o[n+2],e.y+o[n+3]),t.x=e.x+o[n+0],t.y=e.y+o[n+1],e.x+=o[n+2],e.y+=o[n+3],n===0&&r===!0&&a.copy(e);break;case"t":o=b(S);for(let n=0,A=o.length;n<A;n+=2){const q=k(e.x,t.x),st=k(e.y,t.y);s.quadraticCurveTo(q,st,e.x+o[n+0],e.y+o[n+1]),t.x=q,t.y=st,e.x=e.x+o[n+0],e.y=e.y+o[n+1],n===0&&r===!0&&a.copy(e)}break;case"a":o=b(S,[3,4],7);for(let n=0,A=o.length;n<A;n+=7){if(o[n+5]==0&&o[n+6]==0)continue;const q=e.clone();e.x+=o[n+5],e.y+=o[n+6],t.x=e.x,t.y=e.y,G(s,o[n],o[n+1],o[n+2],o[n+3],o[n+4],q,e),n===0&&r===!0&&a.copy(e)}break;case"Z":case"z":s.currentPath.autoClose=!0,s.currentPath.curves.length>0&&(e.copy(a),s.currentPath.currentPoint.copy(e),d=!0);break;default:console.warn(u)}r=!1}return s}function h(i){if(!(!i.sheet||!i.sheet.cssRules||!i.sheet.cssRules.length))for(let s=0;s<i.sheet.cssRules.length;s++){const e=i.sheet.cssRules[s];if(e.type!==1)continue;const t=e.selectorText.split(/,/gm).filter(Boolean).map(a=>a.trim());for(let a=0;a<t.length;a++){const d=Object.fromEntries(Object.entries(e.style).filter(([,r])=>r!==""));Z[t[a]]=Object.assign(Z[t[a]]||{},d)}}}function G(i,s,e,t,a,d,r,y){if(s==0||e==0){i.lineTo(y.x,y.y);return}t=t*Math.PI/180,s=Math.abs(s),e=Math.abs(e);const w=(r.x-y.x)/2,M=(r.y-y.y)/2,c=Math.cos(t)*w+Math.sin(t)*M,u=-Math.sin(t)*w+Math.cos(t)*M;let T=s*s,S=e*e;const o=c*c,n=u*u,A=o/T+n/S;if(A>1){const yt=Math.sqrt(A);s=yt*s,e=yt*e,T=s*s,S=e*e}const q=T*n+S*o,st=(T*S-q)/q;let it=Math.sqrt(Math.max(0,st));a===d&&(it=-it);const _=it*s*u/e,rt=-it*e*c/s,pt=Math.cos(t)*_-Math.sin(t)*rt+(r.x+y.x)/2,St=Math.sin(t)*_+Math.cos(t)*rt+(r.y+y.y)/2,dt=Y(1,0,(c-_)/s,(u-rt)/e),kt=Y((c-_)/s,(u-rt)/e,(-c-_)/s,(-u-rt)/e)%(Math.PI*2);i.currentPath.absellipse(pt,St,s,e,dt,dt+kt,d===0,t)}function Y(i,s,e,t){const a=i*e+s*t,d=Math.sqrt(i*i+s*s)*Math.sqrt(e*e+t*t);let r=Math.acos(Math.max(-1,Math.min(1,a/d)));return i*t-s*e<0&&(r=-r),r}function X(i){const s=l(i.getAttribute("x")||0),e=l(i.getAttribute("y")||0),t=l(i.getAttribute("rx")||i.getAttribute("ry")||0),a=l(i.getAttribute("ry")||i.getAttribute("rx")||0),d=l(i.getAttribute("width")),r=l(i.getAttribute("height")),y=1-.551915024494,w=new ct;return w.moveTo(s+t,e),w.lineTo(s+d-t,e),(t!==0||a!==0)&&w.bezierCurveTo(s+d-t*y,e,s+d,e+a*y,s+d,e+a),w.lineTo(s+d,e+r-a),(t!==0||a!==0)&&w.bezierCurveTo(s+d,e+r-a*y,s+d-t*y,e+r,s+d-t,e+r),w.lineTo(s+t,e+r),(t!==0||a!==0)&&w.bezierCurveTo(s+t*y,e+r,s,e+r-a*y,s,e+r-a),w.lineTo(s,e+a),(t!==0||a!==0)&&w.bezierCurveTo(s,e+a*y,s+t*y,e,s+t,e),w}function z(i){function s(d,r,y){const w=l(r),M=l(y);a===0?t.moveTo(w,M):t.lineTo(w,M),a++}const e=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,t=new ct;let a=0;return i.getAttribute("points").replace(e,s),t.currentPath.autoClose=!0,t}function J(i){function s(d,r,y){const w=l(r),M=l(y);a===0?t.moveTo(w,M):t.lineTo(w,M),a++}const e=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,t=new ct;let a=0;return i.getAttribute("points").replace(e,s),t.currentPath.autoClose=!1,t}function W(i){const s=l(i.getAttribute("cx")||0),e=l(i.getAttribute("cy")||0),t=l(i.getAttribute("r")||0),a=new It;a.absarc(s,e,t,0,Math.PI*2);const d=new ct;return d.subPaths.push(a),d}function V(i){const s=l(i.getAttribute("cx")||0),e=l(i.getAttribute("cy")||0),t=l(i.getAttribute("rx")||0),a=l(i.getAttribute("ry")||0),d=new It;d.absellipse(s,e,t,a,0,Math.PI*2);const r=new ct;return r.subPaths.push(d),r}function nt(i){const s=l(i.getAttribute("x1")||0),e=l(i.getAttribute("y1")||0),t=l(i.getAttribute("x2")||0),a=l(i.getAttribute("y2")||0),d=new ct;return d.moveTo(s,e),d.lineTo(t,a),d.currentPath.autoClose=!1,d}function v(i,s){s=Object.assign({},s);let e={};if(i.hasAttribute("class")){const r=i.getAttribute("class").split(/\s/).filter(Boolean).map(y=>y.trim());for(let y=0;y<r.length;y++)e=Object.assign(e,Z["."+r[y]])}i.hasAttribute("id")&&(e=Object.assign(e,Z["#"+i.getAttribute("id")]));function t(r,y,w){w===void 0&&(w=function(c){return c.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),c}),i.hasAttribute(r)&&(s[y]=w(i.getAttribute(r))),e[r]&&(s[y]=w(e[r])),i.style&&i.style[r]!==""&&(s[y]=w(i.style[r]))}function a(r){return Math.max(0,Math.min(1,l(r)))}function d(r){return Math.max(0,l(r))}return t("fill","fill"),t("fill-opacity","fillOpacity",a),t("fill-rule","fillRule"),t("opacity","opacity",a),t("stroke","stroke"),t("stroke-opacity","strokeOpacity",a),t("stroke-width","strokeWidth",d),t("stroke-linejoin","strokeLineJoin"),t("stroke-linecap","strokeLineCap"),t("stroke-miterlimit","strokeMiterLimit",d),t("visibility","visibility"),s}function k(i,s){return i-(s-i)}function b(i,s,e){if(typeof i!="string")throw new TypeError("Invalid input: "+typeof i);const t={WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},a=0,d=1,r=2,y=3;let w=a,M=!0,c="",u="";const T=[];function S(q,st,it){const _=new SyntaxError('Unexpected character "'+q+'" at index '+st+".");throw _.partial=it,_}function o(){c!==""&&(u===""?T.push(Number(c)):T.push(Number(c)*Math.pow(10,Number(u)))),c="",u=""}let n;const A=i.length;for(let q=0;q<A;q++){if(n=i[q],Array.isArray(s)&&s.includes(T.length%e)&&t.FLAGS.test(n)){w=d,c=n,o();continue}if(w===a){if(t.WHITESPACE.test(n))continue;if(t.DIGIT.test(n)||t.SIGN.test(n)){w=d,c=n;continue}if(t.POINT.test(n)){w=r,c=n;continue}t.COMMA.test(n)&&(M&&S(n,q,T),M=!0)}if(w===d){if(t.DIGIT.test(n)){c+=n;continue}if(t.POINT.test(n)){c+=n,w=r;continue}if(t.EXP.test(n)){w=y;continue}t.SIGN.test(n)&&c.length===1&&t.SIGN.test(c[0])&&S(n,q,T)}if(w===r){if(t.DIGIT.test(n)){c+=n;continue}if(t.EXP.test(n)){w=y;continue}t.POINT.test(n)&&c[c.length-1]==="."&&S(n,q,T)}if(w===y){if(t.DIGIT.test(n)){u+=n;continue}if(t.SIGN.test(n)){if(u===""){u+=n;continue}u.length===1&&t.SIGN.test(u)&&S(n,q,T)}}t.WHITESPACE.test(n)?(o(),w=a,M=!1):t.COMMA.test(n)?(o(),w=a,M=!0):t.SIGN.test(n)?(o(),w=d,c=n):t.POINT.test(n)?(o(),w=r,c=n):S(n,q,T)}return o(),T}const C=["mm","cm","in","pt","pc","px"],j={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function l(i){let s="px";if(typeof i=="string"||i instanceof String)for(let t=0,a=C.length;t<a;t++){const d=C[t];if(i.endsWith(d)){s=d,i=i.substring(0,i.length-d.length);break}}let e;return s==="px"&&m.defaultUnit!=="px"?e=j.in[m.defaultUnit]/m.defaultDPI:(e=j[s][m.defaultUnit],e<0&&(e=j[s].in*m.defaultDPI)),e*parseFloat(i)}function I(i){if(!(i.hasAttribute("transform")||i.nodeName==="use"&&(i.hasAttribute("x")||i.hasAttribute("y"))))return null;const s=E(i);return F.length>0&&s.premultiply(F[F.length-1]),ot.copy(s),F.push(s),s}function E(i){const s=new lt,e=et;if(i.nodeName==="use"&&(i.hasAttribute("x")||i.hasAttribute("y"))){const t=l(i.getAttribute("x")),a=l(i.getAttribute("y"));s.translate(t,a)}if(i.hasAttribute("transform")){const t=i.getAttribute("transform").split(")");for(let a=t.length-1;a>=0;a--){const d=t[a].trim();if(d==="")continue;const r=d.indexOf("("),y=d.length;if(r>0&&r<y){const w=d.slice(0,r),M=b(d.slice(r+1));switch(e.identity(),w){case"translate":if(M.length>=1){const c=M[0];let u=0;M.length>=2&&(u=M[1]),e.translate(c,u)}break;case"rotate":if(M.length>=1){let c=0,u=0,T=0;c=M[0]*Math.PI/180,M.length>=3&&(u=M[1],T=M[2]),$.makeTranslation(-u,-T),L.makeRotation(c),p.multiplyMatrices(L,$),$.makeTranslation(u,T),e.multiplyMatrices($,p)}break;case"scale":if(M.length>=1){const c=M[0];let u=c;M.length>=2&&(u=M[1]),e.scale(c,u)}break;case"skewX":M.length===1&&e.set(1,Math.tan(M[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":M.length===1&&e.set(1,0,0,Math.tan(M[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":M.length===6&&e.set(M[0],M[2],M[4],M[1],M[3],M[5],0,0,1);break}}s.premultiply(e)}}return s}function N(i,s){function e(r){Q.set(r.x,r.y,1).applyMatrix3(s),r.set(Q.x,Q.y)}function t(r){const y=r.xRadius,w=r.yRadius,M=Math.cos(r.aRotation),c=Math.sin(r.aRotation),u=new mt(y*M,y*c,0),T=new mt(-w*c,w*M,0),S=u.applyMatrix3(s),o=T.applyMatrix3(s),n=et.set(S.x,o.x,0,S.y,o.y,0,0,0,1),A=$.copy(n).invert(),it=L.copy(A).transpose().multiply(A).elements,_=tt(it[0],it[1],it[4]),rt=Math.sqrt(_.rt1),pt=Math.sqrt(_.rt2);if(r.xRadius=1/rt,r.yRadius=1/pt,r.aRotation=Math.atan2(_.sn,_.cs),!((r.aEndAngle-r.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const dt=$.set(rt,0,0,0,pt,0,0,0,1),kt=L.set(_.cs,_.sn,0,-_.sn,_.cs,0,0,0,1),yt=dt.multiply(kt).multiply(n),At=Pt=>{const{x:Lt,y:Rt}=new mt(Math.cos(Pt),Math.sin(Pt),0).applyMatrix3(yt);return Math.atan2(Rt,Lt)};r.aStartAngle=At(r.aStartAngle),r.aEndAngle=At(r.aEndAngle),O(s)&&(r.aClockwise=!r.aClockwise)}}function a(r){const y=H(s),w=U(s);r.xRadius*=y,r.yRadius*=w;const M=y>Number.EPSILON?Math.atan2(s.elements[1],s.elements[0]):Math.atan2(-s.elements[3],s.elements[4]);r.aRotation+=M,O(s)&&(r.aStartAngle*=-1,r.aEndAngle*=-1,r.aClockwise=!r.aClockwise)}const d=i.subPaths;for(let r=0,y=d.length;r<y;r++){const M=d[r].curves;for(let c=0;c<M.length;c++){const u=M[c];u.isLineCurve?(e(u.v1),e(u.v2)):u.isCubicBezierCurve?(e(u.v0),e(u.v1),e(u.v2),e(u.v3)):u.isQuadraticBezierCurve?(e(u.v0),e(u.v1),e(u.v2)):u.isEllipseCurve&&(K.set(u.aX,u.aY),e(K),u.aX=K.x,u.aY=K.y,B(s)?t(u):a(u))}}}function O(i){const s=i.elements;return s[0]*s[4]-s[1]*s[3]<0}function B(i){const s=i.elements,e=s[0]*s[3]+s[1]*s[4];if(e===0)return!1;const t=H(i),a=U(i);return Math.abs(e/(t*a))>Number.EPSILON}function H(i){const s=i.elements;return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function U(i){const s=i.elements;return Math.sqrt(s[3]*s[3]+s[4]*s[4])}function tt(i,s,e){let t,a,d,r,y;const w=i+e,M=i-e,c=Math.sqrt(M*M+4*s*s);return w>0?(t=.5*(w+c),y=1/t,a=i*y*e-s*y*s):w<0?a=.5*(w-c):(t=.5*c,a=-.5*c),M>0?d=M+c:d=M-c,Math.abs(d)>2*Math.abs(s)?(y=-2*s/d,r=1/Math.sqrt(1+y*y),d=y*r):Math.abs(s)===0?(d=1,r=0):(y=-.5*d/s,d=1/Math.sqrt(1+y*y),r=y*d),M>0&&(y=d,d=-r,r=y),{rt1:t,rt2:a,cs:d,sn:r}}const P=[],Z={},F=[],et=new lt,$=new lt,L=new lt,p=new lt,K=new D,Q=new mt,ot=new lt,at=new DOMParser().parseFromString(g,"image/svg+xml");return x(at.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:P,xml:at.documentElement}}static createShapes(g){const x={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},f={loc:x.ORIGIN,t:0};function h(k,b,C,j){const l=k.x,I=b.x,E=C.x,N=j.x,O=k.y,B=b.y,H=C.y,U=j.y,tt=(N-E)*(O-H)-(U-H)*(l-E),P=(I-l)*(O-H)-(B-O)*(l-E),Z=(U-H)*(I-l)-(N-E)*(B-O),F=tt/Z,et=P/Z;if(Z===0&&tt!==0||F<=0||F>=1||et<0||et>1)return null;if(tt===0&&Z===0){for(let $=0;$<2;$++)if(G($===0?C:j,k,b),f.loc==x.ORIGIN){const L=$===0?C:j;return{x:L.x,y:L.y,t:f.t}}else if(f.loc==x.BETWEEN){const L=+(l+f.t*(I-l)).toPrecision(10),p=+(O+f.t*(B-O)).toPrecision(10);return{x:L,y:p,t:f.t}}return null}else{for(let p=0;p<2;p++)if(G(p===0?C:j,k,b),f.loc==x.ORIGIN){const K=p===0?C:j;return{x:K.x,y:K.y,t:f.t}}const $=+(l+F*(I-l)).toPrecision(10),L=+(O+F*(B-O)).toPrecision(10);return{x:$,y:L,t:F}}}function G(k,b,C){const j=C.x-b.x,l=C.y-b.y,I=k.x-b.x,E=k.y-b.y,N=j*E-I*l;if(k.x===b.x&&k.y===b.y){f.loc=x.ORIGIN,f.t=0;return}if(k.x===C.x&&k.y===C.y){f.loc=x.DESTINATION,f.t=1;return}if(N<-Number.EPSILON){f.loc=x.LEFT;return}if(N>Number.EPSILON){f.loc=x.RIGHT;return}if(j*I<0||l*E<0){f.loc=x.BEHIND;return}if(Math.sqrt(j*j+l*l)<Math.sqrt(I*I+E*E)){f.loc=x.BEYOND;return}let O;j!==0?O=I/j:O=E/l,f.loc=x.BETWEEN,f.t=O}function Y(k,b){const C=[],j=[];for(let l=1;l<k.length;l++){const I=k[l-1],E=k[l];for(let N=1;N<b.length;N++){const O=b[N-1],B=b[N],H=h(I,E,O,B);H!==null&&C.find(U=>U.t<=H.t+Number.EPSILON&&U.t>=H.t-Number.EPSILON)===void 0&&(C.push(H),j.push(new D(H.x,H.y)))}}return j}function X(k,b,C){const j=new D;b.getCenter(j);const l=[];return C.forEach(I=>{I.boundingBox.containsPoint(j)&&Y(k,I.points).forEach(N=>{l.push({identifier:I.identifier,isCW:I.isCW,point:N})})}),l.sort((I,E)=>I.point.x-E.point.x),l}function z(k,b,C,j,l){(l==null||l==="")&&(l="nonzero");const I=new D;k.boundingBox.getCenter(I);const E=[new D(C,I.y),new D(j,I.y)],N=X(E,k.boundingBox,b);N.sort((P,Z)=>P.point.x-Z.point.x);const O=[],B=[];N.forEach(P=>{P.identifier===k.identifier?O.push(P):B.push(P)});const H=O[0].point.x,U=[];let tt=0;for(;tt<B.length&&B[tt].point.x<H;)U.length>0&&U[U.length-1]===B[tt].identifier?U.pop():U.push(B[tt].identifier),tt++;if(U.push(k.identifier),l==="evenodd"){const P=U.length%2===0,Z=U[U.length-2];return{identifier:k.identifier,isHole:P,for:Z}}else if(l==="nonzero"){let P=!0,Z=null,F=null;for(let et=0;et<U.length;et++){const $=U[et];P?(F=b[$].isCW,P=!1,Z=$):F!==b[$].isCW&&(F=b[$].isCW,P=!0)}return{identifier:k.identifier,isHole:P,for:Z}}else console.warn('fill-rule: "'+l+'" is currently not implemented.')}let J=999999999,W=-999999999,V=g.subPaths.map(k=>{const b=k.getPoints();let C=-999999999,j=999999999,l=-999999999,I=999999999;for(let E=0;E<b.length;E++){const N=b[E];N.y>C&&(C=N.y),N.y<j&&(j=N.y),N.x>l&&(l=N.x),N.x<I&&(I=N.x)}return W<=l&&(W=l+1),J>=I&&(J=I-1),{curves:k.curves,points:b,isCW:Vt.isClockWise(b),identifier:-1,boundingBox:new Ot(new D(I,j),new D(l,C))}});V=V.filter(k=>k.points.length>1);for(let k=0;k<V.length;k++)V[k].identifier=k;const nt=V.map(k=>z(k,V,J,W,g.userData?g.userData.style.fillRule:void 0)),v=[];return V.forEach(k=>{if(!nt[k.identifier].isHole){const C=new jt;C.curves=k.curves,nt.filter(l=>l.isHole&&l.for===k.identifier).forEach(l=>{const I=V[l.identifier],E=new It;E.curves=I.curves,C.holes.push(E)}),v.push(C)}}),v}static getStrokeStyle(g,m,x,f,h){return g=g!==void 0?g:1,m=m!==void 0?m:"#000",x=x!==void 0?x:"miter",f=f!==void 0?f:"butt",h=h!==void 0?h:4,{strokeColor:m,strokeWidth:g,strokeLineJoin:x,strokeLineCap:f,strokeMiterLimit:h}}static pointsToStroke(g,m,x,f){const h=[],G=[],Y=[];if(wt.pointsToStrokeWithBuffers(g,m,x,f,h,G,Y)===0)return null;const X=new Et;return X.setAttribute("position",new xt(h,3)),X.setAttribute("normal",new xt(G,3)),X.setAttribute("uv",new xt(Y,2)),X}static pointsToStrokeWithBuffers(g,m,x,f,h,G,Y,X){const z=new D,J=new D,W=new D,V=new D,nt=new D,v=new D,k=new D,b=new D,C=new D,j=new D,l=new D,I=new D,E=new D,N=new D,O=new D,B=new D,H=new D;x=x!==void 0?x:12,f=f!==void 0?f:.001,X=X!==void 0?X:0,g=M(g);const U=g.length;if(U<2)return 0;const tt=g[0].equals(g[U-1]);let P,Z=g[0],F;const et=m.strokeWidth/2,$=1/(U-1);let L=0,p,K,Q,ot,at=!1,Mt=0,i=X*3,s=X*2;e(g[0],g[1],z).multiplyScalar(et),b.copy(g[0]).sub(z),C.copy(g[0]).add(z),j.copy(b),l.copy(C);for(let c=1;c<U;c++){P=g[c],c===U-1?tt?F=g[1]:F=void 0:F=g[c+1];const u=z;if(e(Z,P,u),W.copy(u).multiplyScalar(et),I.copy(P).sub(W),E.copy(P).add(W),p=L+$,K=!1,F!==void 0){e(P,F,J),W.copy(J).multiplyScalar(et),N.copy(P).sub(W),O.copy(P).add(W),Q=!0,W.subVectors(F,Z),u.dot(W)<0&&(Q=!1),c===1&&(at=Q),W.subVectors(F,P),W.normalize();const T=Math.abs(u.dot(W));if(T>Number.EPSILON){const S=et/T;W.multiplyScalar(-S),V.subVectors(P,Z),nt.copy(V).setLength(S).add(W),B.copy(nt).negate();const o=nt.length(),n=V.length();V.divideScalar(n),v.subVectors(F,P);const A=v.length();switch(v.divideScalar(A),V.dot(B)<n&&v.dot(B)<A&&(K=!0),H.copy(nt).add(P),B.add(P),ot=!1,K?Q?(O.copy(B),E.copy(B)):(N.copy(B),I.copy(B)):d(),m.strokeLineJoin){case"bevel":r(Q,K,p);break;case"round":y(Q,K),Q?a(P,I,N,p,0):a(P,O,E,p,1);break;case"miter":case"miter-clip":default:const q=et*m.strokeMiterLimit/o;if(q<1)if(m.strokeLineJoin!=="miter-clip"){r(Q,K,p);break}else y(Q,K),Q?(v.subVectors(H,I).multiplyScalar(q).add(I),k.subVectors(H,N).multiplyScalar(q).add(N),t(I,p,0),t(v,p,0),t(P,p,.5),t(P,p,.5),t(v,p,0),t(k,p,0),t(P,p,.5),t(k,p,0),t(N,p,0)):(v.subVectors(H,E).multiplyScalar(q).add(E),k.subVectors(H,O).multiplyScalar(q).add(O),t(E,p,1),t(v,p,1),t(P,p,.5),t(P,p,.5),t(v,p,1),t(k,p,1),t(P,p,.5),t(k,p,1),t(O,p,1));else K?(Q?(t(C,L,1),t(b,L,0),t(H,p,0),t(C,L,1),t(H,p,0),t(B,p,1)):(t(C,L,1),t(b,L,0),t(H,p,1),t(b,L,0),t(B,p,0),t(H,p,1)),Q?N.copy(H):O.copy(H)):Q?(t(I,p,0),t(H,p,0),t(P,p,.5),t(P,p,.5),t(H,p,0),t(N,p,0)):(t(E,p,1),t(H,p,1),t(P,p,.5),t(P,p,.5),t(H,p,1),t(O,p,1)),ot=!0;break}}else d()}else d();!tt&&c===U-1&&w(g[0],j,l,Q,!0,L),L=p,Z=P,b.copy(N),C.copy(O)}if(!tt)w(P,I,E,Q,!1,p);else if(K&&h){let c=H,u=B;at!==Q&&(c=B,u=H),Q?(ot||at)&&(u.toArray(h,0),u.toArray(h,9),ot&&c.toArray(h,3)):(ot||!at)&&(u.toArray(h,3),u.toArray(h,9),ot&&c.toArray(h,0))}return Mt;function e(c,u,T){return T.subVectors(u,c),T.set(-T.y,T.x).normalize()}function t(c,u,T){h&&(h[i]=c.x,h[i+1]=c.y,h[i+2]=0,G&&(G[i]=0,G[i+1]=0,G[i+2]=1),i+=3,Y&&(Y[s]=u,Y[s+1]=T,s+=2)),Mt+=3}function a(c,u,T,S,o){z.copy(u).sub(c).normalize(),J.copy(T).sub(c).normalize();let n=Math.PI;const A=z.dot(J);Math.abs(A)<1&&(n=Math.abs(Math.acos(A))),n/=x,W.copy(u);for(let q=0,st=x-1;q<st;q++)V.copy(W).rotateAround(c,n),t(W,S,o),t(V,S,o),t(c,S,.5),W.copy(V);t(V,S,o),t(T,S,o),t(c,S,.5)}function d(){t(C,L,1),t(b,L,0),t(I,p,0),t(C,L,1),t(I,p,0),t(E,p,1)}function r(c,u,T){u?c?(t(C,L,1),t(b,L,0),t(I,p,0),t(C,L,1),t(I,p,0),t(B,p,1),t(I,T,0),t(N,T,0),t(B,T,.5)):(t(C,L,1),t(b,L,0),t(E,p,1),t(b,L,0),t(B,p,0),t(E,p,1),t(E,T,1),t(B,T,0),t(O,T,1)):c?(t(I,T,0),t(N,T,0),t(P,T,.5)):(t(E,T,1),t(O,T,0),t(P,T,.5))}function y(c,u){u&&(c?(t(C,L,1),t(b,L,0),t(I,p,0),t(C,L,1),t(I,p,0),t(B,p,1),t(I,L,0),t(P,p,.5),t(B,p,1),t(P,p,.5),t(N,L,0),t(B,p,1)):(t(C,L,1),t(b,L,0),t(E,p,1),t(b,L,0),t(B,p,0),t(E,p,1),t(E,L,1),t(B,p,0),t(P,p,.5),t(P,p,.5),t(B,p,0),t(O,L,1)))}function w(c,u,T,S,o,n){switch(m.strokeLineCap){case"round":o?a(c,T,u,n,.5):a(c,u,T,n,.5);break;case"square":if(o)z.subVectors(u,c),J.set(z.y,-z.x),W.addVectors(z,J).add(c),V.subVectors(J,z).add(c),S?(W.toArray(h,3),V.toArray(h,0),V.toArray(h,9)):(W.toArray(h,3),Y[7]===1?V.toArray(h,9):W.toArray(h,9),V.toArray(h,0));else{z.subVectors(T,c),J.set(z.y,-z.x),W.addVectors(z,J).add(c),V.subVectors(J,z).add(c);const A=h.length;S?(W.toArray(h,A-3),V.toArray(h,A-6),V.toArray(h,A-12)):(V.toArray(h,A-6),W.toArray(h,A-3),V.toArray(h,A-12))}break}}function M(c){let u=!1;for(let S=1,o=c.length-1;S<o;S++)if(c[S].distanceTo(c[S+1])<f){u=!0;break}if(!u)return c;const T=[];T.push(c[0]);for(let S=1,o=c.length-1;S<o;S++)c[S].distanceTo(c[S+1])>=f&&T.push(c[S]);return T.push(c[c.length-1]),T}}}function pe(R,g){return new Promise((m,x)=>{new wt().load(R,h=>{const G=h.paths,Y=new Ht({color:0,side:Nt}),X=[];G.forEach(z=>{wt.createShapes(z).forEach(W=>{const V=new Wt(W,{depth:.1,bevelEnabled:!1}),nt=new ht(V,Y);nt.scale.set(g,-g,g),X.push(nt)})}),m(X)},void 0,h=>{x(h)})})}const de={mounted(){this.initThree()},methods:{initThree(){this.scene=this.createScene();const R=this.$refs.threeCanvas;this.renderer=this.createRenderer(R),this.camera=this.createCamera(),ie.init(),this.controls=new oe(this.camera,R),this.controls.target.set(1,5,10),this.controls.update(),this.createPointLight();const g=40;this.texture=this.createTexture(g);const m=this.createPalnMesh(this.texture,g);this.scene.add(m);const x=this.createBoxMesh();this.scene.add(x);const f=this.createSphere();this.scene.add(f);const h=ue();h.position.set(0,5,0),h.rotation.set(Math.PI,0,0),this.scene.add(h),pe("https://raw.githubusercontent.com/simple-icons/simple-icons/develop/icons/github.svg",1).then(G=>{if(!G||G.length===0){console.error("未生成任何mesh，请检查SVG路径和内容");return}G.forEach(Y=>{this.scene.add(Y)})}),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.animate)},createScene(){const R=new ne;return R.background=new se("#aaa"),R},createRenderer(R){const g=new ee({canvas:R,antialias:!0});g.outputColorSpace=Tt;const m=window.devicePixelRatio;return g.setPixelRatio(m),g.setSize(window.innerWidth,window.innerHeight,!1),g},makeXYZGUI(R,g,m,x){const f=R.addFolder(m);f.add(g,"x",-10,10).onChange(x),f.add(g,"y",0,10).onChange(x),f.add(g,"z",-10,10).onChange(x),f.open()},createCamera(){const R=new te(45,2,.1,100);return R.position.set(0,10,20),R},createHemisphereLight(){const x=new ut;x.addColor(new ft(f,"color"),"value").name("color"),x.addColor(new ft(f,"groundColor"),"value").name("groundColor");const f=new _t(11657727,12155424,1);this.scene.add(f)},createDicLight(){const R=new $t(16777215,1);R.position.set(0,10,0),R.target.position.set(-5,0,0),this.scene.add(R.target);const g=new ut;g.addColor(new ft(R,"color"),"value").name("color"),g.add(R,"intensity",0,5,.01);const m=new Kt(R);this.scene.add(m);function x(){R.target.updateMatrixWorld(),m.update()}x(),this.makeXYZGUI(g,R.position,"position",x),this.makeXYZGUI(g,R.target.position,"target",x),this.scene.add(R)},createPointLight(){const m=new Qt(16777215,150);m.position.set(0,10,0),this.scene.add(m);const x=new Jt(m);this.scene.add(x);function f(){x.update()}f();const h=new ut;h.addColor(new ft(m,"color"),"value").name("color"),h.add(m,"intensity",0,250,1),h.add(m,"distance",0,40).onChange(f),this.makeXYZGUI(h,m.position,"position",f)},createSpotLight(){const m=new Yt(16777215,150);m.position.set(0,10,0),m.target.position.set(-5,0,0),this.scene.add(m);const x=new Zt(m);this.scene.add(x);function f(){m.target.updateMatrixWorld(),x.update()}f();const h=new ut;h.addColor(new ft(m,"color"),"value").name("color"),h.add(m,"intensity",0,250,1),h.add(m,"distance",0,40).onChange(f),this.makeXYZGUI(h,m.position,"position",f),h.add(new gt(m,"angle"),"value",0,90).name("angle").onChange(f),h.add(m,"penumbra",0,1,.01),this.makeXYZGUI(h,m.target.position,"target",f)},createRectAreaLight(){const f=new vt(16777215,5,12,4);f.position.set(0,10,0),f.rotation.x=Xt.degToRad(-90),this.scene.add(f);const h=new re(f);f.add(h);const G=new ut;G.addColor(new ft(f,"color"),"value").name("color"),G.add(f,"intensity",0,10,.01),G.add(f,"width",0,20),G.add(f,"height",0,20),G.add(new gt(f.rotation,"x"),"value",-180,180).name("x rotation"),G.add(new gt(f.rotation,"y"),"value",-180,180).name("y rotation"),G.add(new gt(f.rotation,"z"),"value",-180,180).name("z rotation"),this.makeXYZGUI(G,f.position,"position")},createTexture(R){const m=new Ut().load("/images/checker.png");m.wrapS=Ct,m.wrapT=Ct,m.magFilter=Ft,m.colorSpace=Tt;const x=R/2;return m.repeat.set(x,x),m},createPalnMesh(R,g){const m=new Dt(g,g),x=new bt({map:R,side:Nt}),f=new ht(m,x);return f.rotation.x=Math.PI*-.5,f},createBoxMesh(){const g=new zt(4,4,4),m=new bt({color:"#8AC"}),x=new ht(g,m);return x.position.set(5,4/2,0),x},createSphere(){const x=new qt(3,32,16),f=new bt({color:"#CA8"}),h=new ht(x,f);return h.position.set(-4,5,0),h},animate(){requestAnimationFrame(this.animate),this.controls.update(),this.renderer.render(this.scene,this.camera)}}},ye={class:"threeCanvas",ref:"threeCanvas"};function me(R,g,m,x,f,h){return le(),ce("div",null,[fe("canvas",ye,null,512)])}const Te=ae(de,[["render",me],["__scopeId","data-v-44687167"]]);export{Te as default};
