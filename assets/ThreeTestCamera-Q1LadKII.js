import{b as S,c as d,a as m,B as b,d as M,e as R,T as H,R as g,N as z,f as w,D as T,H as E,O as G,P as f,W as y,S as B,C as D,g as C}from"./three.module-C4Q2KZKs.js";import{g as l,C as x,M as v}from"./ThreeGUIHelper-BmyOZ9gj.js";import{O as p}from"./OrbitControls-ESzH_XSb.js";import{R as P}from"./RectAreaLightUniformsLib-23HoPzuU.js";import{_}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as k,o as L,f as h}from"./app-sbARqN3U.js";const A={mounted(){this.initThree2()},methods:{initThree(){this.scene=this.createScene();const e=this.$refs.threeCanvas;this.renderer=this.createRenderer(e),this.camera=this.createCamera(),P.init(),this.cameraHelper=new C(this.camera),this.scene.add(this.cameraHelper),this.controls=new p(this.camera,e),this.controls.target.set(1,5,10),this.controls.update(),this.createDicLight();const t=40;this.texture=this.createTexture(t);const s=this.createPalnMesh(this.texture,t);this.scene.add(s);const a=this.createBoxMesh();this.scene.add(a);const r=this.createSphere();this.scene.add(r),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.animate)},initThree2(){this.scene=this.createScene(),this.canvas=this.$refs.threeCanvas,this.view1Elem=document.querySelector("#view1"),this.view2Elem=document.querySelector("#view2"),this.renderer=this.createRenderer(this.canvas),this.camera=this.createOrthographicCamera(),this.controls=new p(this.camera,this.view1Elem),this.controls.update(),this.cameraHelper=new C(this.camera),this.scene.add(this.cameraHelper),this.camera2=this.createCamera2(),this.controls2=new p(this.camera2,this.view2Elem),this.controls2.target.set(0,5,0),this.controls2.update(),this.createDicLight();const e=40;this.texture=this.createTexture(e);const t=this.createPalnMesh(this.texture,e);this.scene.add(t);const s=this.createBoxMesh();this.scene.add(s);const a=this.createSphere();this.scene.add(a),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.animate)},updateCamera(){this.camera.updateProjectionMatrix()},createScene(){const e=new B;return e.background=new D("#aaa"),e},createRenderer(e){const t=new y({canvas:e,antialias:!0});t.outputColorSpace=w;const s=window.devicePixelRatio;return t.setPixelRatio(s),t.setSize(window.innerWidth,window.innerHeight,!1),t},makeXYZGUI(e,t,s,a){const r=e.addFolder(s);r.add(t,"x",-10,10).onChange(a),r.add(t,"y",0,10).onChange(a),r.add(t,"z",-10,10).onChange(a),r.open()},createCamera(){const r=new f(45,2,.1,100);r.position.set(0,10,20);const i=new l;i.add(r,"fov",1,180).onChange(this.updateCamera);const n=new v(r,"near","far",.1);return i.add(n,"min",.1,50,.1).name("near").onChange(this.updateCamera),i.add(n,"max",.1,50,.1).name("far").onChange(this.updateCamera),r},createCamera2(){const e=new f(60,2,.1,500);return e.position.set(40,10,30),e.lookAt(0,5,0),e},createOrthographicCamera(){const n=new G(-1,1,1,-1,5,50);n.position.set(0,10,20),n.zoom=.2;const o=new l;o.add(n,"zoom",.01,1,.01).listen();const c=new v(n,"near","far",.1);return o.add(c,"min",.1,50,.1).name("near").onChange(this.updateCamera),o.add(c,"max",.1,50,.1).name("far").onChange(this.updateCamera),n},setScissorForElement(e){const t=this.canvas.getBoundingClientRect(),s=e.getBoundingClientRect(),a=Math.min(s.right,t.right)-t.left,r=Math.max(0,s.left-t.left),i=Math.min(s.bottom,t.bottom)-t.top,n=Math.max(0,s.top-t.top),o=Math.min(t.width,a-r),c=Math.min(t.height,i-n),u=t.height-i;return this.renderer.setScissor(r,u,o,c),this.renderer.setViewport(r,u,o,c),o/c},createHemisphereLight(){const a=new l;a.addColor(new x(r,"color"),"value").name("color"),a.addColor(new x(r,"groundColor"),"value").name("groundColor");const r=new E(11657727,12155424,1);this.scene.add(r)},createDicLight(){const e=new T(16777215,1);e.position.set(0,10,0),e.target.position.set(-5,0,0),this.scene.add(e.target),this.scene.add(e)},createTexture(e){const s=new H().load("/images/checker.png");s.wrapS=g,s.wrapT=g,s.magFilter=z,s.colorSpace=w;const a=e/2;return s.repeat.set(a,a),s},createPalnMesh(e,t){const s=new M(t,t),a=new d({map:e,side:R}),r=new m(s,a);return r.rotation.x=Math.PI*-.5,r},createBoxMesh(){const t=new b(4,4,4),s=new d({color:"#8AC"}),a=new m(t,s);return a.position.set(5,4/2,0),a},createSphere(){const a=new S(3,32,16),r=new d({color:"#CA8"}),i=new m(a,r);return i.position.set(-4,5,0),i},resizeRendererToDisplaySize(e){const{clientWidth:t,clientHeight:s}=e.domElement,a=e.domElement.width!==t||e.domElement.height!==s;return a&&e.setSize(t,s,!1),a},animate(){this.resizeRendererToDisplaySize(this.renderer),this.renderer.setScissorTest(!0);{const e=this.setScissorForElement(this.view1Elem);this.camera.left=-e,this.camera.right=e,this.camera.updateProjectionMatrix(),this.cameraHelper.update(),this.cameraHelper.visible=!1,this.scene.background.set(0),this.renderer.render(this.scene,this.camera)}{const e=this.setScissorForElement(this.view2Elem);this.camera2.aspect=e,this.camera2.updateProjectionMatrix(),this.cameraHelper.visible=!0,this.scene.background.set(64),this.renderer.render(this.scene,this.camera2)}requestAnimationFrame(this.animate)}}},F={id:"c",ref:"threeCanvas"};function I(e,t,s,a,r,i){return L(),k("div",null,[h("canvas",F,null,512),t[0]||(t[0]=h("div",{class:"split"},[h("div",{id:"view1",tabindex:"1"}),h("div",{id:"view2",tabindex:"2"})],-1))])}const N=_(A,[["render",I],["__scopeId","data-v-c6cb8810"]]);export{N as default};
