(window.webpackJsonp=window.webpackJsonp||[]).push([[13,25],{292:function(e,t,a){"use strict";var i=TypeError;e.exports=function(e,t){if(e<t)throw new i("Not enough arguments");return e}},306:function(e,t,a){"use strict";var i=a(42),s=a(4),n=a(119),r=a(292),l=URLSearchParams,o=l.prototype,c=s(o.append),h=s(o.delete),u=s(o.forEach),v=s([].push),d=new l("a=1&a=2&b=3");d.delete("a",1),d.delete("b",void 0),d+""!="a=2"&&i(o,"delete",(function(e){var t=arguments.length,a=t<2?void 0:arguments[1];if(t&&void 0===a)return h(this,e);var i=[];u(this,(function(e,t){v(i,{key:t,value:e})})),r(t,1);for(var s,l=n(e),o=n(a),d=0,p=0,g=!1,f=i.length;d<f;)s=i[d++],g||s.key===l?(g=!0,h(this,s.key)):p++;for(;p<f;)(s=i[p++]).key===l&&s.value===o||c(this,s.key,s.value)}),{enumerable:!0,unsafe:!0})},307:function(e,t,a){"use strict";var i=a(42),s=a(4),n=a(119),r=a(292),l=URLSearchParams,o=l.prototype,c=s(o.getAll),h=s(o.has),u=new l("a=1");!u.has("a",2)&&u.has("a",void 0)||i(o,"has",(function(e){var t=arguments.length,a=t<2?void 0:arguments[1];if(t&&void 0===a)return h(this,e);var i=c(this,e);r(t,1);for(var s=n(a),l=0;l<i.length;)if(i[l++]===s)return!0;return!1}),{enumerable:!0,unsafe:!0})},308:function(e,t,a){"use strict";var i=a(5),s=a(4),n=a(121),r=URLSearchParams.prototype,l=s(r.forEach);i&&!("size"in r)&&n(r,"size",{get:function(){var e=0;return l(this,(function(){e++})),e},configurable:!0,enumerable:!0})},319:function(e,t,a){},325:function(e,t,a){"use strict";a.r(t);var i={name:"SixPointedStar",props:{color:{type:String,default:"#aaaaaa"},size:{type:[String,Number],default:100}}},s=a(17),n=Object(s.a)(i,(function(){var e=this._self._c;return e("svg",{attrs:{width:this.size,height:this.size,viewBox:"-2 -2 4 4",xmlns:"http://www.w3.org/2000/svg",fill:this.color}},[e("polygon",{attrs:{points:"0,2 1.732,-1 -1.732,-1"}}),this._v(" "),e("polygon",{attrs:{points:"-1.732,1 1.732,1 0,-2  "}})])}),[],!1,null,null,null);t.default=n.exports},333:function(e,t,a){"use strict";a(319)},344:function(e,t,a){"use strict";a.r(t);a(13),a(40),a(306),a(307),a(308),a(325);var i={data:()=>({rainbowColors:["red","orange","yellow","green","blue","indigo","violet"],canvas:null,ctx:null,colorIndex:null,drawing:!1,progress:5,circleSize:5,angle:1e3,colorType:"setting",selectedColor:"#aaaaaa",colorValue:"#aaaaaa",options:[{label:"彩虹色",value:"rainbow"},{label:"自设",value:"setting"}],shape:"circle",shapeOptions:[{label:"圆形",value:"circle"},{label:"矩形",value:"rectangle"},{label:"三角形",value:"triangle"},{label:"星形",value:"star"}]}),mounted(){this.canvas=this.$refs.canvas,this.ctx=this.canvas.getContext("2d"),this.resizeCanvas(),window.addEventListener("resize",this.resizeCanvas),this.drawing=!1,this.canvas.addEventListener("touchstart",e=>{e.preventDefault(),this.drawing=!0}),this.canvas.addEventListener("touchend",e=>{e.preventDefault(),this.drawing=!1}),this.canvas.addEventListener("touchmove",e=>{e.preventDefault(),this.draw(e)}),this.canvas.addEventListener("mousedown",()=>this.drawing=!0),this.canvas.addEventListener("mouseup",()=>this.drawing=!1),this.canvas.addEventListener("mouseleave",()=>this.drawing=!1),this.canvas.addEventListener("mousemove",this.draw)},beforeDestroy(){window.removeEventListener("resize",this.resizeCanvas)},methods:{resizeCanvas(){const e=this.$refs.container.getBoundingClientRect();this.canvas.width=e.width,this.canvas.height=e.height},draw(e){if(!this.drawing)return;const t=this.canvas.getBoundingClientRect();let a,i;e.touches?(a=e.touches[0].clientX-t.left,i=e.touches[0].clientY-t.top):(a=e.clientX-t.left,i=e.clientY-t.top),this.colorIndex||(this.colorIndex=0),"rainbow"==this.colorType?(this.ctx.fillStyle=this.rainbowColors[this.colorIndex],this.colorIndex=(this.colorIndex+1)%this.rainbowColors.length):this.ctx.fillStyle=this.colorValue,this.ctx.beginPath();let s=this.circleSize/2;"circle"==this.shape?(console.log("circle"),this.ctx.arc(a,i,this.circleSize/2,0,2*Math.PI*this.angle/1e3),this.ctx.fill()):"rectangle"==this.shape?(console.log("rectangle"),this.ctx.fillRect(a-s,i-s,this.circleSize,this.circleSize)):"triangle"==this.shape?(console.log("triangle"),this.ctx.beginPath(),this.ctx.moveTo(a-.577*this.circleSize,i+s),this.ctx.lineTo(a,i-2*this.circleSize/3),this.ctx.lineTo(a+.577*this.circleSize,i+s),this.ctx.closePath()):"star"==this.shape&&(console.log("star"),this.ctx.beginPath(),this.ctx.moveTo(a,i+2*s/2),this.ctx.lineTo(a+.577*s/2,i+s/2),this.ctx.lineTo(a+1.732*s/2,i+s/2),this.ctx.lineTo(a+1.154*s/2,i),this.ctx.lineTo(a+1.732*s/2,i-s/2),this.ctx.lineTo(a+.577*s/2,i-s/2),this.ctx.lineTo(a,i-2*s/2),this.ctx.lineTo(a-.577*s/2,i-s/2),this.ctx.lineTo(a-1.732*s/2,i-s/2),this.ctx.lineTo(a-1.154*s/2,i),this.ctx.lineTo(a-1.732*s/2,i+s/2),this.ctx.lineTo(a-.577*s/2,i+s/2),this.ctx.closePath()),this.ctx.fill()},clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},saveCanvas(){const{canvas:e}=this.$refs;e.toBlob(e=>{const t=document.createElement("a");t.download=`canvas_${Date.now()}.png`,t.href=window.URL.createObjectURL(e),t.click(),console.log(e)},"image/png")},uploadCanvasToOss(){},handleProgressChange(){this.circleSize=10+this.progress/100*90},handleAngleChange(){this.angle=this.angle},getChildData(e){this.colorValue=e},checkShape(e){return e==this.shape}}},s=(a(333),a(17)),n=Object(s.a)(i,(function(){var e=this,t=e._self._c;return t("div",{ref:"container",staticClass:"canvas-container"},[t("ColorPicker",{on:{"update:color":e.getChildData},model:{value:e.colorValue,callback:function(t){e.colorValue=t},expression:"colorValue"}}),e._v(" "),t("span",[e._v("颜色:")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.colorType,expression:"colorType"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.colorType=t.target.multiple?a:a[0]}}},e._l(e.options,(function(a){return t("option",{key:a.value,domProps:{value:a.value}},[e._v("\n            "+e._s(a.label)+"\n        ")])})),0),e._v(" "),t("span",[e._v("画笔:")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.shape,expression:"shape"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.shape=t.target.multiple?a:a[0]}}},e._l(e.shapeOptions,(function(a){return t("option",{key:a.value,domProps:{value:a.value}},[e._v("\n            "+e._s(a.label)+"\n        ")])})),0),e._v(" "),e.checkShape("circle")?t("div",{staticClass:"circle",style:{width:e.circleSize+"px",height:e.circleSize+"px",backgroundColor:e.colorValue}}):e._e(),e._v(" "),e.checkShape("rectangle")?t("div",{staticClass:"rectangle",style:{width:e.circleSize+"px",height:e.circleSize+"px",backgroundColor:e.colorValue}}):e._e(),e._v(" "),e.checkShape("triangle")?t("div",{staticClass:"triangle",style:{"border-left-width":e.circleSize/2+"px","border-right-width":e.circleSize/2+"px","border-bottom-width":e.circleSize+"px","border-bottom-color":e.colorValue}}):e._e(),e._v(" "),e.checkShape("star")?t("star",{attrs:{color:e.colorValue,size:e.circleSize}}):e._e(),e._v(" "),t("div",{staticClass:"pen-size"},[t("span",[e._v("大小")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.progress,expression:"progress"}],staticClass:"progress-bar",attrs:{type:"range",min:"0",max:"100"},domProps:{value:e.progress},on:{input:e.handleProgressChange,__r:function(t){e.progress=t.target.value}}}),e._v(" "),e.checkShape("circle")?t("span",[e._v("角度")]):e._e(),e._v(" "),e.checkShape("circle")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.angle,expression:"angle"}],attrs:{type:"range",min:"0",max:"1000"},domProps:{value:e.angle},on:{input:e.handleAngleChange,__r:function(t){e.angle=t.target.value}}}):e._e()]),e._v(" "),t("div",{staticClass:"toolbar"},[t("button",{on:{click:e.clear}},[e._v("清除")]),e._v(" "),t("button",{on:{click:e.saveCanvas}},[e._v("导出")])]),e._v(" "),t("canvas",{ref:"canvas",staticClass:"flex-canvas"})],1)}),[],!1,null,"2ac95135",null);t.default=n.exports}}]);