(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{292:function(e,t,a){"use strict";var n=TypeError;e.exports=function(e,t){if(e<t)throw new n("Not enough arguments");return e}},306:function(e,t,a){"use strict";var n=a(42),s=a(4),i=a(119),o=a(292),r=URLSearchParams,l=r.prototype,c=s(l.append),h=s(l.delete),v=s(l.forEach),u=s([].push),d=new r("a=1&a=2&b=3");d.delete("a",1),d.delete("b",void 0),d+""!="a=2"&&n(l,"delete",(function(e){var t=arguments.length,a=t<2?void 0:arguments[1];if(t&&void 0===a)return h(this,e);var n=[];v(this,(function(e,t){u(n,{key:t,value:e})})),o(t,1);for(var s,r=i(e),l=i(a),d=0,g=0,p=!1,f=n.length;d<f;)s=n[d++],p||s.key===r?(p=!0,h(this,s.key)):g++;for(;g<f;)(s=n[g++]).key===r&&s.value===l||c(this,s.key,s.value)}),{enumerable:!0,unsafe:!0})},307:function(e,t,a){"use strict";var n=a(42),s=a(4),i=a(119),o=a(292),r=URLSearchParams,l=r.prototype,c=s(l.getAll),h=s(l.has),v=new r("a=1");!v.has("a",2)&&v.has("a",void 0)||n(l,"has",(function(e){var t=arguments.length,a=t<2?void 0:arguments[1];if(t&&void 0===a)return h(this,e);var n=c(this,e);o(t,1);for(var s=i(a),r=0;r<n.length;)if(n[r++]===s)return!0;return!1}),{enumerable:!0,unsafe:!0})},308:function(e,t,a){"use strict";var n=a(5),s=a(4),i=a(121),o=URLSearchParams.prototype,r=s(o.forEach);n&&!("size"in o)&&i(o,"size",{get:function(){var e=0;return r(this,(function(){e++})),e},configurable:!0,enumerable:!0})},319:function(e,t,a){},331:function(e,t,a){"use strict";a(319)},341:function(e,t,a){"use strict";a.r(t);a(13),a(40),a(306),a(307),a(308);var n={data:()=>({rainbowColors:["red","orange","yellow","green","blue","indigo","violet"],canvas:null,ctx:null,colorIndex:null,drawing:!1,progress:5,circleSize:5,angle:1e3,colorType:"setting",selectedColor:"#aaaaaa",colorValue:"#aaaaaa",options:[{label:"彩虹色",value:"rainbow"},{label:"自设",value:"setting"}]}),mounted(){this.canvas=this.$refs.canvas,this.ctx=this.canvas.getContext("2d"),this.resizeCanvas(),window.addEventListener("resize",this.resizeCanvas),this.drawing=!1,this.canvas.addEventListener("touchstart",e=>{e.preventDefault(),this.drawing=!0}),this.canvas.addEventListener("touchend",e=>{e.preventDefault(),this.drawing=!1}),this.canvas.addEventListener("touchmove",e=>{e.preventDefault(),this.draw(e)}),this.canvas.addEventListener("mousedown",()=>this.drawing=!0),this.canvas.addEventListener("mouseup",()=>this.drawing=!1),this.canvas.addEventListener("mouseleave",()=>this.drawing=!1),this.canvas.addEventListener("mousemove",this.draw)},beforeDestroy(){window.removeEventListener("resize",this.resizeCanvas)},methods:{resizeCanvas(){const e=this.$refs.container.getBoundingClientRect();this.canvas.width=e.width,this.canvas.height=e.height},draw(e){if(!this.drawing)return;const t=this.canvas.getBoundingClientRect();let a,n;e.touches?(a=e.touches[0].clientX-t.left,n=e.touches[0].clientY-t.top):(a=e.clientX-t.left,n=e.clientY-t.top),this.colorIndex||(this.colorIndex=0),"rainbow"==this.colorType?(this.ctx.fillStyle=this.rainbowColors[this.colorIndex],this.colorIndex=(this.colorIndex+1)%this.rainbowColors.length):this.ctx.fillStyle=this.colorValue,console.log("色： "+this.colorValue),console.log("select"+this.selectedColor),this.ctx.beginPath(),this.ctx.arc(a,n,this.circleSize/2,0,2*Math.PI*this.angle/1e3),this.ctx.fill()},clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},saveCanvas(){const{canvas:e}=this.$refs;e.toBlob(e=>{const t=document.createElement("a");t.download=`canvas_${Date.now()}.png`,t.href=window.URL.createObjectURL(e),t.click(),console.log(e)},"image/png")},uploadCanvasToOss(){},handleProgressChange(){this.circleSize=10+this.progress/100*90},handleAngleChange(){this.angle=this.angle},getChildData(e){this.colorValue=e}}},s=(a(331),a(17)),i=Object(s.a)(n,(function(){var e=this,t=e._self._c;return t("div",{ref:"container",staticClass:"canvas-container"},[t("ColorPicker",{on:{"update:color":e.getChildData},model:{value:e.colorValue,callback:function(t){e.colorValue=t},expression:"colorValue"}}),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.colorType,expression:"colorType"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.colorType=t.target.multiple?a:a[0]}}},e._l(e.options,(function(a){return t("option",{key:a.value,domProps:{value:a.value}},[e._v("\n            "+e._s(a.label)+"\n        ")])})),0),e._v(" "),t("div",{staticClass:"circle",style:{width:e.circleSize+"px",height:e.circleSize+"px",backgroundColor:e.colorValue}}),e._v(" "),t("div",{staticClass:"pen-size"},[t("span",[e._v("大小")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.progress,expression:"progress"}],staticClass:"progress-bar",attrs:{type:"range",min:"0",max:"100"},domProps:{value:e.progress},on:{input:e.handleProgressChange,__r:function(t){e.progress=t.target.value}}}),e._v(" "),t("span",[e._v("角度")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.angle,expression:"angle"}],attrs:{type:"range",min:"0",max:"1000"},domProps:{value:e.angle},on:{input:e.handleAngleChange,__r:function(t){e.angle=t.target.value}}})]),e._v(" "),t("div",{staticClass:"toolbar"},[t("button",{on:{click:e.clear}},[e._v("清除")]),e._v(" "),t("button",{on:{click:e.saveCanvas}},[e._v("导出")])]),e._v(" "),t("canvas",{ref:"canvas",staticClass:"flex-canvas"})],1)}),[],!1,null,"c4543214",null);t.default=i.exports}}]);